(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{244:function(t,a,s){var e=s(305);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,s(11).default)("6b2f3d78",e,!0,{})},304:function(t,a,s){"use strict";var e=s(244);s.n(e).a},305:function(t,a,s){(t.exports=s(10)(!1)).push([t.i,".fa-cog[data-v-5b828c17]{color:#333;font-size:20px;margin-bottom:1px;margin-right:5px}.fa-times[data-v-5b828c17]{cursor:pointer}.pic-name[data-v-5b828c17]{font-size:12px;text-align:center}.pictures[data-v-5b828c17]{width:90%}.claim[data-v-5b828c17]{display:inline-block;width:270px}.claim .btn.btn-primary[data-v-5b828c17]{margin-top:0}.profile .input-group-text[data-v-5b828c17]{font-size:14px}.profile .input-group-text img[data-v-5b828c17]{opacity:.7;width:25px}.profile-pic[data-v-5b828c17]{width:81px;height:81px}.brand-pic[data-v-5b828c17],.featured-pic[data-v-5b828c17],.profile-pic[data-v-5b828c17]{margin:0 auto}.featured-pic[data-v-5b828c17]{width:100px;border-radius:5px}.card .btn[data-v-5b828c17]{display:table;margin:0 auto}.card .settings-label[data-v-5b828c17]{text-align:center}.settings-section[data-v-5b828c17]{margin-top:20px}.settings-section .btn[data-v-5b828c17]{font-size:15px}.settings-section .settings-label[data-v-5b828c17]{text-transform:uppercase;font-weight:500;font-size:13px;margin-bottom:10px}.settings-section .tag[data-v-5b828c17]{font-size:14px;vertical-align:middle;border-radius:4px;border:1px solid #ccc;padding:6px 12px;display:inline-block;white-space:nowrap;margin-bottom:9px}.settings-section .alert[data-v-5b828c17]{width:270px;padding:8px 12px}.settings-section .athlete-id .btn[data-v-5b828c17]{margin-top:-9.5px}form input[data-v-5b828c17]{font-size:14px}@media screen and (max-width:767px){.alert[data-v-5b828c17],.claim[data-v-5b828c17]{width:90%;margin:10px auto 0}.danger-zone[data-v-5b828c17]{margin-bottom:50px}}",""])},396:function(t,a,s){"use strict";s.r(a);s(20);var e=s(1),i=s.n(e),n=s(29),r=s.n(n),l={data:function(){return{id:"",aliasInput:"",claimInput:"",aliases:[],claimFailure:"",claimSuccess:"",aliasSuccess:"",aliasFailure:"",deleteSuccess:"",makeSure:!1,profilePic:null,brandPic:null,featuredPic:null,message:"",imageMessage:""}},head:function(){return{title:"Settings - RaceBase"}},middleware:"auth",asyncData:function(t){var a=t.store,s=r()({},a.state.auth.user);return{user:s,id:s._id}},methods:{loadUser:function(){var t=i()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("auth/fetchUser");case 2:this.user=r()({},this.$store.state.auth.user);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addAlias:function(){var t=this;this.$axios.$post("user/"+this.id+"/alias/"+this.aliasInput).then(function(a){a.failure?(t.aliasSuccess=null,t.aliasFailure=a.failure):a.success&&(t.aliasFailure=null,t.aliasSuccess=a.success,t.loadUser())})},removeAlias:function(t){var a=this;this.$axios.$delete("user/"+this.id+"/alias/"+t).then(function(t){a.aliasSuccess=null,a.aliasFailure=null,a.loadUser()})},claim:function(t){var a=this;this.$axios.$post("user/claim/"+this.id+"/"+t).then(function(s){a.claimFailure="",a.claimSuccess="",s.failure?(a.claimSuccess=null,a.claimFailure=s.failure):s.success&&(a.claimFailure=null,a.claimSuccess=s.success,a.$set(a.user,"athlete_id",t))})},unclaim:function(t){var a=this;this.$axios.$post("user/unclaim/"+this.id+"/"+t).then(function(t){a.claimFailure="",a.claimSuccess="",t.failure?(a.claimFailure=t.failure,a.claimSuccess=null):t.success&&(a.claimSuccess=t.success,a.claimFailure=null,a.$set(a.user,"athlete_id",""))})},deleteAccount:function(){var t=i()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$delete("user/"+this.id);case 2:return t.next=4,this.$store.dispatch("auth/logout");case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateProfile:function(){var t=this;this.$axios.$put("user/"+this.id,this.user).then(function(a){t.message="Profile updated.",t.loadUser()})},onProfilePicChanged:function(t){this.profilePic=t.target.files[0]},onBrandPicChanged:function(t){this.brandPic=t.target.files[0]},onFeaturedPicChanged:function(t){this.featuredPic=t.target.files[0]},uploadProfilePic:function(){var t=this,a=new FormData;a.append("image",this.profilePic),this.$axios.$post("user/"+this.user._id+"/profile_pic",a).then(function(a){t.imageMessage="Profile updated.",t.loadUser()})},uploadBrandPic:function(){var t=this,a=new FormData;a.append("image",this.brandPic),this.$axios.$post("user/"+this.user._id+"/brand_pic",a).then(function(a){t.imageMessage="Profile updated.",t.loadUser()})},uploadFeaturedPic:function(){var t=this,a=new FormData;a.append("image",this.featuredPic),this.$axios.$post("user/"+this.user._id+"/featured_pic",a).then(function(a){t.imageMessage="Profile updated.",t.loadUser()})}}},c=(s(304),s(17)),o=Object(c.a)(l,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"mx-auto w-90 w-md-100 mx-md-0 pl-md-5"},[s("h1",{staticClass:"mt-4"},[s("fa",{attrs:{icon:"cog"}}),t._v(" Settings \n  ")],1),t._v(" "),t.user.athlete_id?s("div",{staticClass:"settings-section"},[s("div",{staticClass:"settings-label"},[t._v("Profile")]),t._v(" "),s("form",{staticClass:"profile mb-4 w-md-75 w-100",on:{submit:function(a){a.preventDefault(),t.updateProfile()}}},[s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-md-6 col-12 mb-md-0 mb-3"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.trainer,expression:"user.trainer"}],staticClass:"form-control",attrs:{placeholder:"Current Trainer"},domProps:{value:t.user.trainer},on:{input:function(a){a.target.composing||t.$set(t.user,"trainer",a.target.value)}}}),t._v(" "),t._m(0)])]),t._v(" "),s("div",{staticClass:"col-md-6 col-12"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.racer,expression:"user.racer"}],staticClass:"form-control",attrs:{placeholder:"Current Racer"},domProps:{value:t.user.racer},on:{input:function(a){a.target.composing||t.$set(t.user,"racer",a.target.value)}}}),t._v(" "),t._m(1)])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 col-12 mb-md-0 mb-3"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.mileage,expression:"user.mileage"}],staticClass:"form-control",attrs:{placeholder:"Weekly Mileage"},domProps:{value:t.user.mileage},on:{input:function(a){a.target.composing||t.$set(t.user,"mileage",a.target.value)}}}),t._v(" "),t._m(2)])]),t._v(" "),s("div",{staticClass:"col-md-6 col-12"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.location,expression:"user.location"}],staticClass:"form-control",attrs:{placeholder:"Location"},domProps:{value:t.user.location},on:{input:function(a){a.target.composing||t.$set(t.user,"location",a.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[s("fa",{staticClass:"mr-1",attrs:{icon:"map-marker-alt"}})],1)])])])]),t._v(" "),s("div",{staticClass:"row mt-3"},[s("div",{staticClass:"col-md-6 col-12 mb-md-0 mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.stravaUrl,expression:"user.stravaUrl"}],staticClass:"form-control",attrs:{placeholder:"Strava URL"},domProps:{value:t.user.stravaUrl},on:{input:function(a){a.target.composing||t.$set(t.user,"stravaUrl",a.target.value)}}})])]),t._v(" "),s("input",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit",value:"Update"}}),t._v(" "),t.message?s("div",{staticClass:"mt-3"},[t._v(" "+t._s(t.message)+" ")]):t._e()])]):t._e(),t._v(" "),t.user.athlete_id?s("div",{staticClass:"settings-section pictures     row     mt-3     w-100 w-md-auto"},[s("div",{staticClass:"col-md-4 col-12 mb-md-0 mb-3"},[s("div",{staticClass:"settings-section card p-3 mt-0"},[s("div",{staticClass:"settings-label mb-3"},[t._v(" Profile Picture ")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 align-items-center align-content-center d-flex flex-wrap"},[t.user.profilePicUrl?s("img",{staticClass:"profile-pic",attrs:{src:t.user.profilePicUrl}}):t._e(),t._v(" "),t.user.profilePicUrl?t._e():s("img",{staticClass:"profile-pic",attrs:{src:"/images/default.png"}})]),t._v(" "),s("div",{staticClass:"col-6"},[s("div",[s("label",{staticClass:"mb-2 btn btn-default"},[t._v("\n                Browse\n                "),s("input",{attrs:{type:"file",name:"image",hidden:""},on:{change:t.onProfilePicChanged}})])]),t._v(" "),s("div",[s("button",{staticClass:"btn btn-primary",on:{click:t.uploadProfilePic}},[t._v(" Upload ")])])])]),t._v(" "),t.profilePic?s("span",{staticClass:"pic-name mt-3"},[t._v(" "+t._s(t.profilePic.name)+" ")]):t._e()])]),t._v(" "),s("div",{staticClass:"col-md-4 col-12 mb-md-0 mb-3"},[s("div",{staticClass:"settings-section card p-3 mt-0"},[s("div",{staticClass:"settings-label mb-3"},[t._v(" Brand / Team Logo ")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 align-items-center align-content-center d-flex"},[t.user.brandPicUrl?s("img",{staticClass:"brand-pic mb-2",attrs:{src:t.user.brandPicUrl}}):t._e()]),t._v(" "),s("div",{staticClass:"col-6"},[s("div",[s("label",{staticClass:"mb-2 mx-auto btn btn-default"},[t._v("\n                Browse\n                "),s("input",{attrs:{type:"file",name:"image",hidden:""},on:{change:t.onBrandPicChanged}})])]),t._v(" "),s("div",[s("button",{staticClass:"btn btn-primary",on:{click:t.uploadBrandPic}},[t._v(" Upload ")])])])]),t._v(" "),t.brandPic?s("span",{staticClass:"pic-name"},[t._v(" "+t._s(t.brandPic.name)+" ")]):t._e()])]),t._v(" "),s("div",{staticClass:"col-md-4 col-12 mb-md-0 mb-3"},[s("div",{staticClass:"settings-section card p-3 pb-md-3 mt-0"},[s("div",{staticClass:"settings-label mb-3"},[t._v(" Featured Image ")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 align-items-center align-content-center d-flex"},[t.user.featuredPicUrl?s("img",{staticClass:"featured-pic mb-2",attrs:{src:t.user.featuredPicUrl}}):t._e()]),t._v(" "),s("div",{staticClass:"col-6"},[s("div",[s("label",{staticClass:"mb-2 mx-auto btn btn-default"},[t._v("\n                Browse\n                "),s("input",{attrs:{type:"file",name:"image",hidden:""},on:{change:t.onFeaturedPicChanged}})])]),t._v(" "),s("div",[s("button",{staticClass:"btn btn-primary",on:{click:t.uploadFeaturedPic}},[t._v(" Upload ")])])])]),t._v(" "),t.featuredPic?s("span",{staticClass:"pic-name"},[t._v(" "+t._s(t.featuredPic.name)+" ")]):t._e()])]),t._v(" "),t.imageMessage?s("div",{staticClass:"mt-3 pl-3"},[s("strong",[t._v(" "+t._s(t.imageMessage)+" ")])]):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"settings-section"},[s("div",{staticClass:"settings-label"},[t._v("Email")]),t._v(" "),s("div",{staticClass:"tag"},[t._v(t._s(t.user.email))])]),t._v(" "),s("div",{staticClass:"settings-section"},[s("div",{staticClass:"settings-label"},[t._v("Athlete ID")]),t._v(" "),t.user.athlete_id?s("span",{staticClass:"athlete-id"},[s("div",{staticClass:"tag"},[s("fa",{attrs:{icon:"user"}}),t._v("   "+t._s(t.user.athlete_id))],1),t._v(" "),t.user.athlete_id?s("button",{staticClass:"btn btn-primary",on:{click:function(a){t.unclaim(t.user.athlete_id)}}},[t._v("\n        Unclaim\n      ")]):t._e()]):t._e(),t._v(" "),t.user.athlete_id?t._e():s("form",{staticClass:"claim mb-2",on:{submit:function(a){a.preventDefault(),t.claim(t.claimInput)}}},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.claimInput,expression:"claimInput"}],staticClass:"form-control",attrs:{pattern:"^\\S*$",type:"text",id:"athleteIDInput",placeholder:"Athlete ID (no spaces)",required:""},domProps:{value:t.claimInput},on:{input:function(a){a.target.composing||(t.claimInput=a.target.value)}}}),t._v(" "),t._m(3)])]),t._v(" "),t.claimSuccess?s("div",{staticClass:"alert alert-success"},[t._v(" \n      "+t._s(t.claimSuccess)+" \n    ")]):t._e(),t._v(" "),t.claimFailure?s("div",{staticClass:"alert alert-danger"},[t._v(" \n      "+t._s(t.claimFailure)+"\n    ")]):t._e()]),t._v(" "),s("div",{staticClass:"settings-section"},[s("div",{staticClass:"settings-label"},[t._v("Aliases "),s("fa",{attrs:{icon:"user-plus"}})],1),t._v(" "),s("div",{staticClass:"aliases"},t._l(t.user.aliases,function(a){return t.user.aliases.length>0?s("div",{staticClass:"alias tag mr-2"},[t._v("\n        "+t._s(a)+"  \n        "),s("a",{on:{click:function(s){t.removeAlias(a)}}},[s("fa",{attrs:{icon:"times"}})],1)]):t._e()}),0),t._v(" "),s("form",{staticClass:"claim mb-2",on:{submit:function(a){a.preventDefault(),t.addAlias()}}},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.aliasInput,expression:"aliasInput"}],staticClass:"form-control",attrs:{pattern:"^\\S*$",type:"text",id:"athleteIDInput",placeholder:"Alias Athlete ID (no spaces)",required:""},domProps:{value:t.aliasInput},on:{input:function(a){a.target.composing||(t.aliasInput=a.target.value)}}}),t._v(" "),t._m(4)])]),t._v(" "),t.aliasSuccess?s("div",{staticClass:"alert alert-success"},[t._v(" \n      "+t._s(t.aliasSuccess)+" \n    ")]):t._e(),t._v(" "),t.aliasFailure?s("div",{staticClass:"alert alert-danger"},[t._v(" \n      "+t._s(t.aliasFailure)+"\n    ")]):t._e()]),t._v(" "),s("div",{staticClass:"settings-section danger-zone pb-4"},[s("div",{staticClass:"settings-label"},[t._v("Danger Zone")]),t._v(" "),t.makeSure?t._e():s("button",{staticClass:"btn btn-danger",on:{click:function(a){t.makeSure=!0}}},[t._v("\n      Delete your account "),s("fa",{attrs:{icon:"trash-alt"}})],1),t._v(" "),t.makeSure?s("div",{staticClass:"alert alert-info make-sure"},[t._v("\n      Are you sure? This cannot be undone.\n    ")]):t._e(),t._v(" "),t.makeSure?s("button",{staticClass:"btn btn-default make-sure",on:{click:function(a){t.makeSure=!1}}},[t._v("\n      No\n    ")]):t._e(),t._v(" "),t.makeSure?s("button",{staticClass:"btn btn-danger make-sure",on:{click:t.deleteAccount}},[t._v("\n      Yes, delete my account\n    ")]):t._e(),t._v(" "),t.deleteSuccess?s("div",{staticClass:"alert alert-success"},[t._v(" \n      "+t._s(t.deleteSuccess)+" \n    ")]):t._e()])])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("img",{staticClass:"shoe mr-1",attrs:{src:"/images/trainer.svg"}})])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("img",{staticClass:"shoe mr-1",attrs:{src:"/images/racer.svg"}})])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[this._v(" miles per week ")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"input-group-append"},[a("input",{staticClass:"btn btn-primary",attrs:{value:"Claim",type:"submit"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"input-group-append"},[a("input",{staticClass:"btn btn-primary",attrs:{value:"Claim",type:"submit"}})])}],!1,null,"5b828c17",null);o.options.__file="settings.vue";a.default=o.exports}}]);