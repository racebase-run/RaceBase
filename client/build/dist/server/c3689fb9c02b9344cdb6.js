exports.ids=[80],exports.modules={179:function(e,t,n){"use strict";n.r(t);var r=n(88),d=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t.default=d.a},180:function(e,t,n){(t=n(2)(!1)).push([e.i,".fa-cog[data-v-719066e0]{color:#333;font-size:20px;margin-bottom:1px;margin-right:5px}.fa-times[data-v-719066e0]{cursor:pointer}.pic-name[data-v-719066e0]{font-size:12px;text-align:center}.pictures[data-v-719066e0]{width:90%}.claim[data-v-719066e0]{display:inline-block;width:270px}.claim .btn.btn-primary[data-v-719066e0]{margin-top:0}.settings-section[data-v-719066e0]{margin-top:20px}.settings-section .btn[data-v-719066e0]{font-size:15px}.settings-section .settings-label[data-v-719066e0]{text-transform:uppercase;font-weight:500;font-size:13px;margin-bottom:10px}.settings-section .tag[data-v-719066e0]{font-size:14px;vertical-align:middle;border-radius:4px;border:1px solid #ccc;padding:6px 12px;display:inline-block;white-space:nowrap;margin-bottom:9px}.settings-section .alert[data-v-719066e0]{width:270px;padding:8px 12px}.settings-section .athlete-id .btn[data-v-719066e0]{margin-top:-9.5px}form input[data-v-719066e0]{font-size:14px}@media screen and (max-width:767px){.alert[data-v-719066e0],.claim[data-v-719066e0]{width:90%;margin:10px auto 0}.danger-zone[data-v-719066e0]{margin-bottom:50px}}",""]),e.exports=t},307:function(e,t,n){"use strict";n.r(t);var r={data:()=>({id:"",deleteSuccess:"",makeSure:!1,profilePic:null,brandPic:null,featuredPic:null,message:"",imageMessage:"",joinCode:""}),components:{ProfilePic:()=>n.e(0).then(n.bind(null,346)),SettingsNav:()=>n.e(6).then(n.bind(null,355))},head:()=>({title:"Settings - RaceBase"}),middleware:"auth",async asyncData({store:e,$axios:t}){let n={...e.state.auth.user},r=null;try{n.team_id&&n.coach?r=await t.$get("/team/"+n.team_id):n.team_id&&(r=await t.$get("/team/public/"+n.team_id))}catch(e){console.log(e)}let d=n.email,o=0;try{o=(await t.$get("/user/referrals")).referrals}catch(e){console.log(e.response.data)}return{user:n,id:n._id,resent:!1,sentReset:!1,referrals:o,currentEmail:d,emailMessage:"",team:r,coachAccount:n.coach}},methods:{loadUser:async function(){await this.$store.dispatch("auth/fetchUser"),this.user={...this.$store.state.auth.user},this.currentEmail=this.user.email},joinTeam:async function(){try{await this.$axios.$post("team/join/"+this.joinCode)}catch(e){console.log(e.response.data)}this.loadUser()},leaveTeam:async function(){try{await this.$axios.$post("team/leave")}catch(e){console.log(e.response.data)}this.loadUser()},deleteAccount:async function(){await this.$axios.$delete("user/"+this.id),await this.$store.dispatch("auth/logout")},updateEmail:function(){this.$axios.$put("user/email/"+this.user.email).then(e=>{this.emailMessage=e,this.loadUser()}).catch(e=>{console.log(e),this.emailMessage=e.response.data})},changeAccountType:function(){this.$axios.$put("user/coach",{coach:this.coachAccount}).then(e=>{this.loadUser()}).catch(e=>{console.log(e)})},resendVerification:async function(){await this.$axios.post("user/resendVerification"),this.resent=!0},addToClipboard:function(){document.querySelector("#copy").select(),document.execCommand("copy"),this.copied=!0},resetPassword:async function(){try{await this.$axios.$post("/user/forgotPassword",{email:this.user.email}),this.sentReset=!0}catch(e){console.log(e)}}}},d=n(1);var component=Object(d.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._ssrNode('<div class="mx-auto w-90 w-md-100 mx-md-0 pl-md-5" data-v-719066e0>',"</div>",[e._ssrNode('<h1 class="mt-4" data-v-719066e0>',"</h1>",[n("fa",{attrs:{icon:"cogs"}}),e._ssrNode(" Settings \n  ")],2),e._ssrNode(" "),n("SettingsNav",{attrs:{coach:e.user.coach}}),e._ssrNode(" "),e._ssrNode('<div class="settings-section" data-v-719066e0>',"</div>",[e._ssrNode('<div class="settings-label" data-v-719066e0>Email</div> '),e._ssrNode("<div data-v-719066e0>","</div>",[e._ssrNode('<form class="input-group mb-2 w-50" data-v-719066e0>',"</form>",[e._ssrNode('<input type="email" placeholder="Change your email..."'+e._ssrAttr("value",e.user.email)+' class="form-control" data-v-719066e0> '),e._ssrNode('<span class="input-group-append" data-v-719066e0>',"</span>",[e._ssrNode('<button type="submit" class="btn btn-outline-dark" data-v-719066e0>',"</button>",[n("fa",{attrs:{icon:e.user.email==e.currentEmail?"check":"save"}})],1)])],2)]),e._ssrNode(" "+(e.emailMessage?"<div data-v-719066e0>"+e._ssrEscape(e._s(e.emailMessage))+"</div>":"\x3c!----\x3e")+" "+(e.user.active?"<div data-v-719066e0> Your email has been verified. </div>":'<div data-v-719066e0>\n      Please verify your email! \n      Click \n      <a href="#" data-v-719066e0>here</a> \n      to resend your verification email.\n      '+(e.resent?"<p data-v-719066e0><strong data-v-719066e0>Sent.</strong></p>":"\x3c!----\x3e")+"</div>"))],2),e._ssrNode(' <div class="settings-section" data-v-719066e0><div class="settings-label" data-v-719066e0>Reset Password</div> <div data-v-719066e0>\n      Click \n      <a href="#" data-v-719066e0>here</a> \n      to send a reset link to your email.\n      '+(e.sentReset?"<p data-v-719066e0><strong data-v-719066e0>Sent.</strong></p>":"\x3c!----\x3e")+"</div></div> "),e._ssrNode('<div class="settings-section mt-4" data-v-719066e0>',"</div>",[e._ssrNode('<div class="settings-label" data-v-719066e0>Referral Code</div> <div class="mb-2" data-v-719066e0>\n      Refer 5 friends with this code and get a free RaceBase tee shirt!\n    </div> '),e._ssrNode('<div class="input-group w-50" data-v-719066e0>',"</div>",[e._ssrNode('<input id="copy" readonly="readonly"'+e._ssrAttr("value",e.user.referralCode)+' class="form-control" data-v-719066e0> '),e._ssrNode('<span class="input-group-append" data-v-719066e0>',"</span>",[e._ssrNode('<div class="btn btn-outline-dark" data-v-719066e0>',"</div>",[n("fa",{attrs:{icon:"clipboard"}})],1)])],2),e._ssrNode(' <div class="mt-2" data-v-719066e0><strong data-v-719066e0>'+e._ssrEscape(" \n        You have "+e._s(e.referrals||0)+" referral")+(1!=e.referrals?"<span data-v-719066e0>s</span>":"\x3c!----\x3e")+". \n      </strong></div>")],2),e._ssrNode(' <div class="settings-section" data-v-719066e0><div class="settings-label" data-v-719066e0> Account Type </div> <div data-v-719066e0><label class="form-check-label mb-3" data-v-719066e0><input type="radio"'+e._ssrAttr("value",!0)+e._ssrAttr("checked",e._q(e.coachAccount,!0))+' data-v-719066e0> Coach Â  \n        <input type="radio"'+e._ssrAttr("value",!1)+e._ssrAttr("checked",e._q(e.coachAccount,!1))+' data-v-719066e0> Athlete\n      </label></div> <div class="btn btn-primary btn-small" data-v-719066e0>Save</div></div> '+(e.user.coach?"\x3c!----\x3e":'<div class="settings-section" data-v-719066e0><div class="settings-label" data-v-719066e0> Team </div> '+(e.user.team_id?'<div class="d-flex align-items-center" data-v-719066e0><div class="tag mr-2 mb-0" data-v-719066e0>'+e._ssrEscape(" \n        "+e._s(e.user.team_id)+"\n      ")+'</div> <div class="btn btn-primary" data-v-719066e0>\n        Leave\n      </div></div>':'<div class="d-flex flex-shrink w-50" data-v-719066e0><input type="text" placeholder="Join Code"'+e._ssrAttr("value",e.joinCode)+' class="form-control mr-2" data-v-719066e0> <div class="btn btn-primary" data-v-719066e0> Join </div></div>')+"</div>")+" "),e._ssrNode('<div class="settings-section danger-zone pb-4" data-v-719066e0>',"</div>",[e._ssrNode('<div class="settings-label" data-v-719066e0>Danger Zone</div> '),e.makeSure?e._e():e._ssrNode('<button class="btn btn-danger" data-v-719066e0>',"</button>",[e._ssrNode("\n      Delete your account "),n("fa",{attrs:{icon:"trash-alt"}})],2),e._ssrNode(" "+(e.makeSure?'<div class="alert alert-info make-sure" data-v-719066e0>\n      Are you sure? This cannot be undone.\n    </div>':"\x3c!----\x3e")+" "+(e.makeSure?'<button class="btn btn-default make-sure" data-v-719066e0>\n      No\n    </button>':"\x3c!----\x3e")+" "+(e.makeSure?'<button class="btn btn-danger make-sure" data-v-719066e0>\n      Yes, delete my account\n    </button>':"\x3c!----\x3e")+" "+(e.deleteSuccess?'<div class="alert alert-success" data-v-719066e0>'+e._ssrEscape(" \n      "+e._s(e.deleteSuccess)+" \n    ")+"</div>":"\x3c!----\x3e"))],2)],2)])}),[],!1,(function(e){var t=n(179);t.__inject__&&t.__inject__(e)}),"719066e0","2a0e2ed0");t.default=component.exports},88:function(e,t,n){var content=n(180);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);var r=n(3).default;e.exports.__inject__=function(e){r("be9c0002",content,!0,e)}}};