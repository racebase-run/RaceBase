exports.ids=[54],exports.modules={151:function(t,e,d){"use strict";d.r(e);var c=d(82),r=d.n(c);for(var n in c)"default"!==n&&function(t){d.d(e,t,function(){return c[t]})}(n);e.default=r.a},152:function(t,e,d){(t.exports=d(2)(!1)).push([t.i,".fa-cog[data-v-712cbf0a]{color:#333;font-size:20px;margin-bottom:1px;margin-right:5px}.fa-times[data-v-712cbf0a]{cursor:pointer}.pic-name[data-v-712cbf0a]{font-size:12px;text-align:center}.pictures[data-v-712cbf0a]{width:90%}.auto-width-input[data-v-712cbf0a]{width:auto;display:inline;flex:none;background:#fff}.claim[data-v-712cbf0a]{display:inline-block;width:270px}.claim .btn.btn-primary[data-v-712cbf0a]{margin-top:0}.profile .input-group-text[data-v-712cbf0a]{font-size:14px}.profile .input-group-text img[data-v-712cbf0a]{opacity:.7;width:25px}.profile-pic[data-v-712cbf0a]{border-radius:7px;overflow:hidden;display:inline-block;width:80px;height:80px}.brand-pic[data-v-712cbf0a],.featured-pic[data-v-712cbf0a],.profile-pic[data-v-712cbf0a]{margin:0 auto}.featured-pic[data-v-712cbf0a]{width:100px;border-radius:5px}.card .btn[data-v-712cbf0a]{display:table;margin:0 auto}.card .settings-label[data-v-712cbf0a]{text-align:center}.settings-section[data-v-712cbf0a]{margin-top:20px}.settings-section .btn[data-v-712cbf0a]{font-size:15px}.settings-section .settings-label[data-v-712cbf0a]{text-transform:uppercase;font-weight:500;font-size:13px;margin-bottom:10px}.settings-section .tag[data-v-712cbf0a]{font-size:14px;vertical-align:middle;border-radius:4px;border:1px solid #ccc;padding:6px 12px;display:inline-block;white-space:nowrap;margin-bottom:9px}.settings-section .alert[data-v-712cbf0a]{width:270px;padding:8px 12px}.settings-section .athlete-id .btn[data-v-712cbf0a]{margin-top:-9.5px}form input[data-v-712cbf0a]{font-size:14px}@media screen and (max-width:767px){.alert[data-v-712cbf0a],.claim[data-v-712cbf0a]{width:90%;margin:10px auto 0}.danger-zone[data-v-712cbf0a]{margin-bottom:50px}}",""])},237:function(t,e,d){"use strict";d.r(e);var c={data:()=>({id:"",aliasInput:"",claimInput:"",aliases:[],claimFailure:"",claimSuccess:"",aliasSuccess:"",aliasFailure:"",deleteSuccess:"",makeSure:!1,profilePic:null,brandPic:null,featuredPic:null,message:"",imageMessage:"",joinCode:""}),components:{ProfilePic:()=>d.e(0).then(d.bind(null,259))},head:()=>({title:"Settings - RaceBase"}),middleware:"auth",async asyncData({store:t,$axios:e}){let d={...t.state.auth.user},c=null;d.team_id&&d.coach?c=await e.$get("/team/"+d.team_id):d.team_id&&(c=await e.$get("/team/public/"+d.team_id));let r=d.email,n=(await e.$get("/user/referrals")).referrals;return{user:d,id:d._id,resent:!1,sentReset:!1,referrals:n,currentEmail:r,emailMessage:"",team:c}},methods:{loadUser:async function(){await this.$store.dispatch("auth/fetchUser"),this.user={...this.$store.state.auth.user},this.currentEmail=this.user.email},joinTeam:async function(){await this.$axios.$post("team/join/"+this.joinCode);this.loadUser()},leaveTeam:async function(){await this.$axios.$post("team/leave"),this.loadUser()},addAlias:function(){this.$axios.$post("user/"+this.id+"/alias/"+this.aliasInput).then(t=>{t.failure?(this.aliasSuccess=null,this.aliasFailure=t.failure):t.success&&(this.aliasFailure=null,this.aliasSuccess=t.success,this.loadUser())})},removeAlias:function(t){this.$axios.$delete("user/"+this.id+"/alias/"+t).then(t=>{this.aliasSuccess=null,this.aliasFailure=null,this.loadUser()})},claim:function(t){this.$axios.$post("user/claim/"+this.id+"/"+t).then(t=>{this.claimFailure="",this.claimSuccess="",t.failure?(this.claimSuccess=null,this.claimFailure=t.failure):t.success&&(this.claimFailure=null,this.claimSuccess=t.success,this.loadUser())})},unclaim:function(t){this.$axios.$post("user/unclaim/"+this.id+"/"+t).then(t=>{this.claimFailure="",this.claimSuccess="",t.failure?(this.claimFailure=t.failure,this.claimSuccess=null):t.success&&(this.claimSuccess=t.success,this.claimFailure=null,this.loadUser())})},unclaimTeam:async function(){let t=await this.$axios.$post("/user/unclaim/team");console.log(t),this.loadUser()},deleteAccount:async function(){await this.$axios.$delete("user/"+this.id),await this.$store.dispatch("auth/logout")},updateProfile:function(){this.$axios.$put("user/"+this.id,this.user).then(t=>{this.message="Profile updated.",this.loadUser()})},updateEmail:function(){this.$axios.$put("user/"+this.id+"/email/"+this.user.email).then(t=>{this.emailMessage=t,this.loadUser()})},onProfilePicChanged:function(t){this.profilePic=t.target.files[0]},onBrandPicChanged:function(t){this.brandPic=t.target.files[0]},onFeaturedPicChanged:function(t){this.featuredPic=t.target.files[0]},uploadProfilePic:function(){const t=new FormData;t.append("image",this.profilePic),this.$axios.$post("user/"+this.user._id+"/profile_pic",t).then(t=>{this.imageMessage="Profile updated.",this.loadUser()})},resendVerification:async function(){await this.$axios.post("user/resendVerification"),this.resent=!0},uploadBrandPic:function(){const t=new FormData;t.append("image",this.brandPic),this.$axios.$post("user/"+this.user._id+"/brand_pic",t).then(t=>{this.imageMessage="Profile updated.",this.loadUser()})},uploadFeaturedPic:function(){const t=new FormData;t.append("image",this.featuredPic),this.$axios.$post("user/"+this.user._id+"/featured_pic",t).then(t=>{this.imageMessage="Profile updated.",this.loadUser()})},addToClipboard:function(){document.querySelector("#copy").select(),document.execCommand("copy"),this.copied=!0},resetPassword:async function(){await this.$axios.$post("/user/forgotPassword",{email:this.user.email}),this.sentReset=!0}}},r=d(1);var component=Object(r.a)(c,function(){var t=this,e=t.$createElement,d=t._self._c||e;return d("div",[t._ssrNode('<div class="mx-auto w-90 w-md-100 mx-md-0 pl-md-5" data-v-712cbf0a>',"</div>",[t._ssrNode('<h1 class="mt-4" data-v-712cbf0a>',"</h1>",[d("fa",{attrs:{icon:"cog"}}),t._ssrNode(" Settings \n  ")],2),t._ssrNode(" "),t._ssrNode('<div class="settings-section mt-4" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-label" data-v-712cbf0a>Referral Code</div> <div class="mb-2" data-v-712cbf0a>\n      Refer 5 friends with this code and get a free RaceBase tee shirt!\n    </div> '),t._ssrNode('<div class="input-group" data-v-712cbf0a>',"</div>",[t._ssrNode('<input id="copy" readonly="readonly"'+t._ssrAttr("value",t.user.referralCode)+' class="auto-width-input form-control" data-v-712cbf0a> '),t._ssrNode('<span class="input-group-append" data-v-712cbf0a>',"</span>",[t._ssrNode('<div class="btn btn-outline-dark" data-v-712cbf0a>',"</div>",[d("fa",{attrs:{icon:"clipboard"}})],1)])],2),t._ssrNode(' <div class="mt-2" data-v-712cbf0a><strong data-v-712cbf0a>'+t._ssrEscape(" \n        You have "+t._s(t.referrals||0)+" referral")+(1!=t.referrals?"<span data-v-712cbf0a>s</span>":"\x3c!----\x3e")+". \n      </strong></div>")],2),t._ssrNode(" "),t.user.athlete_id?t._ssrNode('<div class="settings-section" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-label" data-v-712cbf0a>Profile</div> '),t._ssrNode('<form class="profile mb-4 w-md-75 w-100" data-v-712cbf0a>',"</form>",[t._ssrNode('<div class="row mb-3" data-v-712cbf0a><div class="col-md-6 col-12 mb-md-0 mb-3" data-v-712cbf0a><div class="input-group" data-v-712cbf0a><input placeholder="Current Trainer"'+t._ssrAttr("value",t.user.trainer)+' class="form-control" data-v-712cbf0a> <div class="input-group-append" data-v-712cbf0a><span class="input-group-text" data-v-712cbf0a><img src="/images/trainer.svg" class="shoe mr-1" data-v-712cbf0a></span></div></div></div> <div class="col-md-6 col-12" data-v-712cbf0a><div class="input-group" data-v-712cbf0a><input placeholder="Current Racer"'+t._ssrAttr("value",t.user.racer)+' class="form-control" data-v-712cbf0a> <div class="input-group-append" data-v-712cbf0a><span class="input-group-text" data-v-712cbf0a><img src="/images/racer.svg" class="shoe mr-1" data-v-712cbf0a></span></div></div></div></div> '),t._ssrNode('<div class="row" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="col-md-6 col-12 mb-md-0 mb-3" data-v-712cbf0a><div class="input-group" data-v-712cbf0a><input placeholder="Weekly Mileage"'+t._ssrAttr("value",t.user.mileage)+' class="form-control" data-v-712cbf0a> <div class="input-group-append" data-v-712cbf0a><span class="input-group-text" data-v-712cbf0a> miles per week </span></div></div></div> '),t._ssrNode('<div class="col-md-6 col-12" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="input-group" data-v-712cbf0a>',"</div>",[t._ssrNode('<input placeholder="Location"'+t._ssrAttr("value",t.user.location)+' class="form-control" data-v-712cbf0a> '),t._ssrNode('<div class="input-group-append" data-v-712cbf0a>',"</div>",[t._ssrNode('<span class="input-group-text" data-v-712cbf0a>',"</span>",[d("fa",{staticClass:"mr-1",attrs:{icon:"map-marker-alt"}})],1)])],2)])],2),t._ssrNode(' <div class="row mt-3" data-v-712cbf0a><div class="col-md-6 col-12 mb-md-0 mb-3" data-v-712cbf0a><input placeholder="Strava URL"'+t._ssrAttr("value",t.user.stravaUrl)+' class="form-control" data-v-712cbf0a></div></div> <input type="submit" value="Update" class="btn btn-primary mt-3" data-v-712cbf0a> '+(t.message?'<div class="mt-3" data-v-712cbf0a>'+t._ssrEscape(" "+t._s(t.message)+" ")+"</div>":"\x3c!----\x3e"))],2)],2):t._e(),t._ssrNode(" "),t.user.athlete_id?t._ssrNode('<div class="settings-section pictures \n    row \n    mt-3 \n    w-100 w-md-auto" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="col-md-4 col-12 mb-md-0 mb-3" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-section card p-3 mt-0" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-label mb-3" data-v-712cbf0a> Profile Picture </div> '),t._ssrNode('<div class="row" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="profile-pic" data-v-712cbf0a>',"</div>",[d("ProfilePic",{attrs:{url:t.user.profilePicUrl}})],1),t._ssrNode(' <div class="col-6" data-v-712cbf0a><div data-v-712cbf0a><label class="mb-2 btn btn-default" data-v-712cbf0a>\n                Browse\n                <input type="file" name="image" hidden="hidden" data-v-712cbf0a></label></div> <div data-v-712cbf0a><button class="btn btn-primary" data-v-712cbf0a> Upload </button></div></div>')],2),t._ssrNode(" "+(t.profilePic?'<span class="pic-name mt-3" data-v-712cbf0a>'+t._ssrEscape(" "+t._s(t.profilePic.name)+" ")+"</span>":"\x3c!----\x3e"))],2)]),t._ssrNode(' <div class="col-md-4 col-12 mb-md-0 mb-3" data-v-712cbf0a><div class="settings-section card p-3 mt-0" data-v-712cbf0a><div class="settings-label mb-3" data-v-712cbf0a> Brand / Team Logo </div> <div class="row" data-v-712cbf0a><div class="col-6 align-items-center align-content-center d-flex" data-v-712cbf0a>'+(t.user.brandPicUrl?"<img"+t._ssrAttr("src",t.user.brandPicUrl)+' class="brand-pic mb-2" data-v-712cbf0a>':"\x3c!----\x3e")+'</div> <div class="col-6" data-v-712cbf0a><div data-v-712cbf0a><label class="mb-2 mx-auto btn btn-default" data-v-712cbf0a>\n                Browse\n                <input type="file" name="image" hidden="hidden" data-v-712cbf0a></label></div> <div data-v-712cbf0a><button class="btn btn-primary" data-v-712cbf0a> Upload </button></div></div></div> '+(t.brandPic?'<span class="pic-name" data-v-712cbf0a>'+t._ssrEscape(" "+t._s(t.brandPic.name)+" ")+"</span>":"\x3c!----\x3e")+'</div></div> <div class="col-md-4 col-12 mb-md-0 mb-3" data-v-712cbf0a><div class="settings-section card p-3 pb-md-3 mt-0" data-v-712cbf0a><div class="settings-label mb-3" data-v-712cbf0a> Featured Image </div> <div class="row" data-v-712cbf0a><div class="col-6 align-items-center align-content-center d-flex" data-v-712cbf0a>'+(t.user.featuredPicUrl?"<img"+t._ssrAttr("src",t.user.featuredPicUrl)+' class="featured-pic mb-2" data-v-712cbf0a>':"\x3c!----\x3e")+'</div> <div class="col-6" data-v-712cbf0a><div data-v-712cbf0a><label class="mb-2 mx-auto btn btn-default" data-v-712cbf0a>\n                Browse\n                <input type="file" name="image" hidden="hidden" data-v-712cbf0a></label></div> <div data-v-712cbf0a><button class="btn btn-primary" data-v-712cbf0a> Upload </button></div></div></div> '+(t.featuredPic?'<span class="pic-name" data-v-712cbf0a>'+t._ssrEscape(" "+t._s(t.featuredPic.name)+" ")+"</span>":"\x3c!----\x3e")+"</div></div> "+(t.imageMessage?'<div class="mt-3 pl-3" data-v-712cbf0a><strong data-v-712cbf0a>'+t._ssrEscape(" "+t._s(t.imageMessage)+" ")+"</strong></div>":"\x3c!----\x3e"))],2):t._e(),t._ssrNode(" "),t._ssrNode('<div class="settings-section" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-label" data-v-712cbf0a>Email</div> '),t._ssrNode("<div data-v-712cbf0a>","</div>",[t._ssrNode('<form class="input-group mb-2" data-v-712cbf0a>',"</form>",[t._ssrNode('<input type="email" placeholder="Change your email..."'+t._ssrAttr("value",t.user.email)+' class="form-control auto-width-input" data-v-712cbf0a> '),t._ssrNode('<span class="input-group-append" data-v-712cbf0a>',"</span>",[t._ssrNode('<button type="submit" class="btn btn-outline-dark" data-v-712cbf0a>',"</button>",[d("fa",{attrs:{icon:t.user.email==t.currentEmail?"check":"save"}})],1)])],2)]),t._ssrNode(" "+(t.emailMessage?"<div data-v-712cbf0a>"+t._ssrEscape(t._s(t.emailMessage))+"</div>":"\x3c!----\x3e")+" "+(t.user.active?"<div data-v-712cbf0a> Your email has been verified. </div>":'<div data-v-712cbf0a>\n      Please verify your email! \n      Click \n      <a href="#" data-v-712cbf0a>here</a> \n      to resend your verification email.\n      '+(t.resent?"<p data-v-712cbf0a><strong data-v-712cbf0a>Sent.</strong></p>":"\x3c!----\x3e")+"</div>"))],2),t._ssrNode(' <div class="settings-section" data-v-712cbf0a><div class="settings-label" data-v-712cbf0a>Reset Password</div> <div data-v-712cbf0a>\n      Click \n      <a href="#" data-v-712cbf0a>here</a> \n      to send a reset link to your email.\n      '+(t.sentReset?"<p data-v-712cbf0a><strong data-v-712cbf0a>Sent.</strong></p>":"\x3c!----\x3e")+"</div></div> "),t._ssrNode('<div class="settings-section" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-label" data-v-712cbf0a>Athlete ID</div> '),t.user.athlete_id?t._ssrNode('<span class="athlete-id" data-v-712cbf0a>',"</span>",[t._ssrNode('<div class="tag" data-v-712cbf0a>',"</div>",[d("fa",{attrs:{icon:"user"}}),t._ssrNode(t._ssrEscape("   "+t._s(t.user.athlete_id)))],2),t._ssrNode(" "+(t.user.athlete_id?'<button class="btn btn-primary" data-v-712cbf0a>\n        Unclaim\n      </button>':"\x3c!----\x3e"))],2):t._e(),t._ssrNode(" "+(t.user.athlete_id?"\x3c!----\x3e":'<form class="claim mb-2" data-v-712cbf0a><div class="input-group" data-v-712cbf0a><input pattern="^\\S*$" type="text" id="athleteIDInput" placeholder="Athlete ID (no spaces)" required="required"'+t._ssrAttr("value",t.claimInput)+' class="form-control" data-v-712cbf0a> <span class="input-group-append" data-v-712cbf0a><input value="Claim" type="submit" class="btn btn-primary" data-v-712cbf0a></span></div></form>')+" "+(t.claimSuccess?'<div class="alert alert-success" data-v-712cbf0a>'+t._ssrEscape(" \n      "+t._s(t.claimSuccess)+" \n    ")+"</div>":"\x3c!----\x3e")+" "+(t.claimFailure?'<div class="alert alert-danger" data-v-712cbf0a>'+t._ssrEscape(" \n      "+t._s(t.claimFailure)+"\n    ")+"</div>":"\x3c!----\x3e"))],2),t._ssrNode(" "+(t.user.coach?"\x3c!----\x3e":'<div class="settings-section" data-v-712cbf0a><div class="settings-label" data-v-712cbf0a> Team </div> '+(t.user.team_id?'<div class="d-flex align-items-center" data-v-712cbf0a><div class="tag mr-2 mb-0" data-v-712cbf0a>'+t._ssrEscape(" \n        "+t._s(t.user.team_id)+"\n      ")+'</div> <div class="btn btn-primary" data-v-712cbf0a>\n        Leave\n      </div></div>':'<div class="d-flex flex-shrink w-50" data-v-712cbf0a><input type="text" placeholder="Join Code"'+t._ssrAttr("value",t.joinCode)+' class="form-control mr-2" data-v-712cbf0a> <div class="btn btn-primary" data-v-712cbf0a> Join </div></div>')+"</div>")+" "),t.user.coach?t._ssrNode('<div class="settings-section" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-label" data-v-712cbf0a> Coaching </div> '),t.user.team_id?t._ssrNode('<div class="d-flex align-items-center" data-v-712cbf0a>',"</div>",[t._ssrNode("<div data-v-712cbf0a> Your team: </div> "),d("nuxt-link",{staticClass:"ml-2",attrs:{to:"/team/"+t.user.team_id}},[t._v("\n        "+t._s(t.user.team_id)+"\n      ")]),t._ssrNode(' <div class="btn btn-outline-primary btn-small ml-3" data-v-712cbf0a>\n        Unclaim\n      </div>')],2):t._ssrNode("<div data-v-712cbf0a>","</div>",[d("nuxt-link",{attrs:{to:"/signup/coach/claim"}},[t._v("Claim a team")])],1),t._ssrNode(" "+(t.team?'<div class="mt-2" data-v-712cbf0a><strong data-v-712cbf0a>Join Code:</strong>'+t._ssrEscape(" "+t._s(t.team.join_code))+"</div>":"\x3c!----\x3e"))],2):t._e(),t._ssrNode(" "),t._ssrNode('<div class="settings-section" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-label" data-v-712cbf0a>',"</div>",[t._ssrNode("Aliases "),d("fa",{attrs:{icon:"user-plus"}})],2),t._ssrNode(" "),t._ssrNode('<div class="aliases" data-v-712cbf0a>',"</div>",t._l(t.user.aliases,function(e){return t.user.aliases.length>0?t._ssrNode('<div class="alias tag mr-2" data-v-712cbf0a>',"</div>",[t._ssrNode(t._ssrEscape("\n        "+t._s(e)+"  \n        ")),t._ssrNode("<a data-v-712cbf0a>","</a>",[d("fa",{attrs:{icon:"times"}})],1)],2):t._e()}),0),t._ssrNode(' <form class="claim mb-2" data-v-712cbf0a><div class="input-group" data-v-712cbf0a><input pattern="^\\S*$" type="text" id="athleteIDInput" placeholder="Alias Athlete ID (no spaces)" required="required"'+t._ssrAttr("value",t.aliasInput)+' class="form-control" data-v-712cbf0a> <span class="input-group-append" data-v-712cbf0a><input value="Claim" type="submit" class="btn btn-primary" data-v-712cbf0a></span></div></form> '+(t.aliasSuccess?'<div class="alert alert-success" data-v-712cbf0a>'+t._ssrEscape(" \n      "+t._s(t.aliasSuccess)+" \n    ")+"</div>":"\x3c!----\x3e")+" "+(t.aliasFailure?'<div class="alert alert-danger" data-v-712cbf0a>'+t._ssrEscape(" \n      "+t._s(t.aliasFailure)+"\n    ")+"</div>":"\x3c!----\x3e"))],2),t._ssrNode(" "),t._ssrNode('<div class="settings-section danger-zone pb-4" data-v-712cbf0a>',"</div>",[t._ssrNode('<div class="settings-label" data-v-712cbf0a>Danger Zone</div> '),t.makeSure?t._e():t._ssrNode('<button class="btn btn-danger" data-v-712cbf0a>',"</button>",[t._ssrNode("\n      Delete your account "),d("fa",{attrs:{icon:"trash-alt"}})],2),t._ssrNode(" "+(t.makeSure?'<div class="alert alert-info make-sure" data-v-712cbf0a>\n      Are you sure? This cannot be undone.\n    </div>':"\x3c!----\x3e")+" "+(t.makeSure?'<button class="btn btn-default make-sure" data-v-712cbf0a>\n      No\n    </button>':"\x3c!----\x3e")+" "+(t.makeSure?'<button class="btn btn-danger make-sure" data-v-712cbf0a>\n      Yes, delete my account\n    </button>':"\x3c!----\x3e")+" "+(t.deleteSuccess?'<div class="alert alert-success" data-v-712cbf0a>'+t._ssrEscape(" \n      "+t._s(t.deleteSuccess)+" \n    ")+"</div>":"\x3c!----\x3e"))],2)],2)])},[],!1,function(t){var e=d(151);e.__inject__&&e.__inject__(t)},"712cbf0a","750d8839");e.default=component.exports},82:function(t,e,d){var content=d(152);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var c=d(3).default;t.exports.__inject__=function(t){c("316aeff2",content,!0,t)}}};
//# sourceMappingURL=21a6f266b5b2e00ee651.js.map