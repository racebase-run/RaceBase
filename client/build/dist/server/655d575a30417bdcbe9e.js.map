{"version":3,"file":"655d575a30417bdcbe9e.js","sources":["webpack:///./pages/races/all/_page.vue"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst RaceTable = () => import('~/components/RaceTable')\n\nexport default {\n  components: {\n    RaceTable\n  },\n  head () {\n    return {\n      title: \"All Races - RaceBase\", \n      meta: [{\n        hid: \"OpenGraph Image\", \n        property: \"og:image\",\n        content: process.env.ROOT_URL + '/images/opengraph/races.png'\n      }, {\n        hid: \"OpenGraph Title\", \n        property: \"og:title\", \n        content: \"All Races\"\n      }]\n    }\n  },\n  data () {\n    return {\n      searching: false, \n      typing: false,\n      searchInput: \"\"\n    }\n  },\n  async asyncData ({ $axios, params }) {\n    let pageNum = params.page || \"1\"\n    let page = await $axios.$get('race/list/' + pageNum + '/10')\n    let count = await $axios.$get('result/count')\n\n    count = Number(count.count).toLocaleString()\n\n    let lastPage = page.page == page.pages\n\n    return {\n      races: page.docs, \n      count: count, \n      currentPage: pageNum,\n      lastPage: lastPage\n    }\n  },\n  methods : {\n    search: async function(typing) {\n      if (!this.searchInput) {\n        let page = await this.$axios.$get('race/list/' + this.currentPage + '/10')\n        this.races = page.docs\n        this.lastPage = page.page == page.pages\n      } else {\n        this.$axios.$get('search/races/' + this.searchInput)\n        .then((res) => {\n          if (!typing || res.length > 0) {\n            this.races = res; \n            this.searching = true; \n          } else {\n            this.searching = false;\n          }\n        });   \n      }\n    }\n  }\n}\n"],"mappings":"AA4CA","sourceRoot":""}