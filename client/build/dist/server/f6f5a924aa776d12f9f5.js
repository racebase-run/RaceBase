exports.ids=[55],exports.modules={100:function(t,e,r){var content=r(204);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var d=r(3).default;t.exports.__inject__=function(t){d("002ee088",content,!0,t)}},203:function(t,e,r){"use strict";r.r(e);var d=r(100),n=r.n(d);for(var o in d)"default"!==o&&function(t){r.d(e,t,(function(){return d[t]}))}(o);e.default=n.a},204:function(t,e,r){(e=r(2)(!1)).push([t.i,".version[data-v-0189d958]{padding:0;width:25px;height:25px;line-height:25px;border-radius:5px;font-size:16.66666667px;font-weight:600;margin:0 auto;display:block}h2[data-v-0189d958]{font-size:26px}h4[data-v-0189d958]{font-size:18px}.btn-restore[data-v-0189d958],h4[data-v-0189d958]{text-transform:uppercase}.btn-restore[data-v-0189d958]{font-size:13px;font-weight:500;padding:3px 5px}.deleted[data-v-0189d958]{border-bottom:1px solid #dadada}.table-container[data-v-0189d958]{border:1px solid #dadada;border-radius:3px}.table-container .history .revision.header th[data-v-0189d958]{font-weight:500}.table-container .history .revision td[data-v-0189d958],.table-container .history .revision th[data-v-0189d958]{padding:5px 10px}.table-container .history .revision button[data-v-0189d958]{padding:2px 5px;text-transform:uppercase;font-size:11px;font-weight:500}",""]),t.exports=e},322:function(t,e,r){"use strict";r.r(e);var d=r(60),n=r.n(d);var o={components:{Viewer:()=>r.e(12).then(r.bind(null,363))},async asyncData({params:t,$axios:e}){let r=await e.$get("result/"+t.id+"/history"),d=!1,n=!1;try{n=await e.$get("result/"+t.id)}catch(t){d=!0}for(var o of r){let t=await e.$get("user/"+o.author+"/info");o.author=t}let l=Array(r.length);return l.fill(!1),{history:[...r],current:n,id:t.id,confirmed:l,deleted:d}},methods:{getHistory:async function(){let t=await this.$axios.$get("result/"+this.id+"/history"),e=await this.$axios.$get("result/"+this.id);for(var r of t){let t=await this.$axios.$get("user/"+r.author+"/info");r.author=t}this.history=[...t],this.current={...e}},formatDate:function(t){return n()(t).format("MMMM D YYYY")},confirm:function(i){this.confirmed.splice(i,1,!0)},revert:async function(i){await this.$axios.post("result/"+this.history[i].document_id+"/revert/"+this.history[i].version),this.getHistory(),this.confirmed=!1},unconfirm:function(i){this.confirmed.splice(i,1,!1)},deleteResult:async function(t){await this.$axios.delete("result/"+t),this.$router.push({path:"/races/"+this.current.race_id+"/"+this.current.event_id})},restore:async function(){let t=await this.$axios.$post("result/"+this.id+"/restore");t&&this.$router.push({path:"/result/history/"+t._id})}}},l=r(1);var component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"p-4"},[!t.deleted&&t.current?t._ssrNode("<div data-v-0189d958>","</div>",[r("Viewer",{staticClass:"mb-3",attrs:{doc:t.current,root:!0},on:{deleteResult:t.deleteResult}})],1):t._ssrNode('<div class="deleted mb-3 pb-2" data-v-0189d958><h2 class="d-flex align-items-center" data-v-0189d958><span data-v-0189d958> This result has been deleted. </span> '+(t.history.length>0?'<button class="btn btn-primary btn-restore ml-3" data-v-0189d958> Restore </button>':"\x3c!----\x3e")+"</h2></div>"),t._ssrNode(' <h2 class="mb-3" data-v-0189d958> Revision History </h2> '),t._ssrNode('<div class="table-container p-2" data-v-0189d958>',"</div>",[t.history.length>0?t._ssrNode('<table class="history" data-v-0189d958>',"</table>",[t._ssrNode("<tbody data-v-0189d958>","</tbody>",[t._ssrNode('<tr class="revision header" data-v-0189d958><th data-v-0189d958> Version </th> <th data-v-0189d958> Modified </th> <th data-v-0189d958> Author </th></tr> '),t._l(t.history,(function(e,i){return t._ssrNode('<tr class="revision" data-v-0189d958>',"</tr>",[t._ssrNode("<td data-v-0189d958>","</td>",[r("nuxt-link",{staticClass:"btn btn-primary version",attrs:{to:"/result/history/"+t.id+"/version/"+e.version}},[t._v("\n              "+t._s(e.version)+"\n            ")])],1),t._ssrNode(" <td data-v-0189d958>"+t._ssrEscape(" \n            "+t._s(t.formatDate(e.date))+"\n          ")+"</td> "),t._ssrNode("<td data-v-0189d958>","</td>",[e.author.athlete_id?r("nuxt-link",{attrs:{to:"/athlete/"+e.author.athlete_id}},[t._v("\n              "+t._s(e.author.name)+" \n            ")]):r("div",[t._v(" \n              "+t._s(e.author.name)+"\n            ")])],1),t._ssrNode(" "+(e.version==t.current.version||t.deleted?"\x3c!----\x3e":"<td data-v-0189d958>"+(t.confirmed[i]?'<div class="d-flex" data-v-0189d958><button class="btn btn-danger mr-2" data-v-0189d958>\n                Confirm \n              </button> <button class="btn btn-default" data-v-0189d958> \n                Cancel\n              </button></div>':'<button class="btn btn-default" data-v-0189d958> \n              Revert\n            </button>')+"</td>"))],2)}))],2)]):t._ssrNode('<div class="p-3" data-v-0189d958><h4 class="mb-0" data-v-0189d958> No revision history to display </h4></div>')])],2)}),[],!1,(function(t){var e=r(203);e.__inject__&&e.__inject__(t)}),"0189d958","aec869dc");e.default=component.exports}};