exports.ids=[31],exports.modules={114:function(e,t,c){"use strict";c.r(t);var d=c(72),r=c.n(d);for(var l in d)"default"!==l&&function(e){c.d(t,e,function(){return d[e]})}(l);t.default=r.a},115:function(e,t,c){(e.exports=c(2)(!1)).push([e.i,".fa-cog[data-v-5e91fbc4]{color:#333;font-size:20px;margin-bottom:1px;margin-right:5px}.fa-times[data-v-5e91fbc4]{cursor:pointer}.pic-name[data-v-5e91fbc4]{font-size:12px;text-align:center}.pictures[data-v-5e91fbc4]{width:90%}.claim[data-v-5e91fbc4]{display:inline-block;width:270px}.claim .btn.btn-primary[data-v-5e91fbc4]{margin-top:0}.profile .input-group-text[data-v-5e91fbc4]{font-size:14px}.profile .input-group-text img[data-v-5e91fbc4]{opacity:.7;width:25px}.profile-pic[data-v-5e91fbc4]{width:81px;height:81px}.brand-pic[data-v-5e91fbc4],.featured-pic[data-v-5e91fbc4],.profile-pic[data-v-5e91fbc4]{margin:0 auto}.featured-pic[data-v-5e91fbc4]{width:100px;border-radius:5px}.card .btn[data-v-5e91fbc4]{display:table;margin:0 auto}.card .settings-label[data-v-5e91fbc4]{text-align:center}.settings-section[data-v-5e91fbc4]{margin-top:20px}.settings-section .btn[data-v-5e91fbc4]{font-size:15px}.settings-section .settings-label[data-v-5e91fbc4]{text-transform:uppercase;font-weight:500;font-size:13px;margin-bottom:10px}.settings-section .tag[data-v-5e91fbc4]{font-size:14px;vertical-align:middle;border-radius:4px;border:1px solid #ccc;padding:6px 12px;display:inline-block;white-space:nowrap;margin-bottom:9px}.settings-section .alert[data-v-5e91fbc4]{width:270px;padding:8px 12px}.settings-section .athlete-id .btn[data-v-5e91fbc4]{margin-top:-9.5px}form input[data-v-5e91fbc4]{font-size:14px}@media screen and (max-width:767px){.alert[data-v-5e91fbc4],.claim[data-v-5e91fbc4]{width:90%;margin:10px auto 0}.danger-zone[data-v-5e91fbc4]{margin-bottom:50px}}",""])},165:function(e,t,c){"use strict";c.r(t);var d={data:()=>({id:"",aliasInput:"",claimInput:"",aliases:[],claimFailure:"",claimSuccess:"",aliasSuccess:"",aliasFailure:"",deleteSuccess:"",makeSure:!1,profilePic:null,brandPic:null,featuredPic:null,message:"",imageMessage:""}),head:()=>({title:"Settings - RaceBase"}),middleware:"auth",asyncData({store:e}){let t={...e.state.auth.user};return{user:t,id:t._id}},methods:{loadUser:async function(){await this.$store.dispatch("auth/fetchUser"),this.user={...this.$store.state.auth.user}},addAlias:function(){this.$axios.$post("user/"+this.id+"/alias/"+this.aliasInput).then(e=>{e.failure?(this.aliasSuccess=null,this.aliasFailure=e.failure):e.success&&(this.aliasFailure=null,this.aliasSuccess=e.success,this.loadUser())})},removeAlias:function(e){this.$axios.$delete("user/"+this.id+"/alias/"+e).then(e=>{this.aliasSuccess=null,this.aliasFailure=null,this.loadUser()})},claim:function(e){this.$axios.$post("user/claim/"+this.id+"/"+e).then(e=>{this.claimFailure="",this.claimSuccess="",e.failure?(this.claimSuccess=null,this.claimFailure=e.failure):e.success&&(this.claimFailure=null,this.claimSuccess=e.success,this.loadUser())})},unclaim:function(e){this.$axios.$post("user/unclaim/"+this.id+"/"+e).then(e=>{this.claimFailure="",this.claimSuccess="",e.failure?(this.claimFailure=e.failure,this.claimSuccess=null):e.success&&(this.claimSuccess=e.success,this.claimFailure=null,this.loadUser())})},deleteAccount:async function(){await this.$axios.$delete("user/"+this.id),await this.$store.dispatch("auth/logout")},updateProfile:function(){this.$axios.$put("user/"+this.id,this.user).then(e=>{this.message="Profile updated.",this.loadUser()})},onProfilePicChanged:function(e){this.profilePic=e.target.files[0]},onBrandPicChanged:function(e){this.brandPic=e.target.files[0]},onFeaturedPicChanged:function(e){this.featuredPic=e.target.files[0]},uploadProfilePic:function(){const e=new FormData;e.append("image",this.profilePic),this.$axios.$post("user/"+this.user._id+"/profile_pic",e).then(e=>{this.imageMessage="Profile updated.",this.loadUser()})},uploadBrandPic:function(){const e=new FormData;e.append("image",this.brandPic),this.$axios.$post("user/"+this.user._id+"/brand_pic",e).then(e=>{this.imageMessage="Profile updated.",this.loadUser()})},uploadFeaturedPic:function(){const e=new FormData;e.append("image",this.featuredPic),this.$axios.$post("user/"+this.user._id+"/featured_pic",e).then(e=>{this.imageMessage="Profile updated.",this.loadUser()})}}},r=c(1);var component=Object(r.a)(d,function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",[e._ssrNode('<div class="mx-auto w-90 w-md-100 mx-md-0 pl-md-5" data-v-5e91fbc4>',"</div>",[e._ssrNode('<h1 class="mt-4" data-v-5e91fbc4>',"</h1>",[c("fa",{attrs:{icon:"cog"}}),e._ssrNode(" Settings \n  ")],2),e._ssrNode(" "),e.user.athlete_id?e._ssrNode('<div class="settings-section" data-v-5e91fbc4>',"</div>",[e._ssrNode('<div class="settings-label" data-v-5e91fbc4>Profile</div> '),e._ssrNode('<form class="profile mb-4 w-md-75 w-100" data-v-5e91fbc4>',"</form>",[e._ssrNode('<div class="row mb-3" data-v-5e91fbc4><div class="col-md-6 col-12 mb-md-0 mb-3" data-v-5e91fbc4><div class="input-group" data-v-5e91fbc4><input placeholder="Current Trainer"'+e._ssrAttr("value",e.user.trainer)+' class="form-control" data-v-5e91fbc4> <div class="input-group-append" data-v-5e91fbc4><span class="input-group-text" data-v-5e91fbc4><img src="/images/trainer.svg" class="shoe mr-1" data-v-5e91fbc4></span></div></div></div> <div class="col-md-6 col-12" data-v-5e91fbc4><div class="input-group" data-v-5e91fbc4><input placeholder="Current Racer"'+e._ssrAttr("value",e.user.racer)+' class="form-control" data-v-5e91fbc4> <div class="input-group-append" data-v-5e91fbc4><span class="input-group-text" data-v-5e91fbc4><img src="/images/racer.svg" class="shoe mr-1" data-v-5e91fbc4></span></div></div></div></div> '),e._ssrNode('<div class="row" data-v-5e91fbc4>',"</div>",[e._ssrNode('<div class="col-md-6 col-12 mb-md-0 mb-3" data-v-5e91fbc4><div class="input-group" data-v-5e91fbc4><input placeholder="Weekly Mileage"'+e._ssrAttr("value",e.user.mileage)+' class="form-control" data-v-5e91fbc4> <div class="input-group-append" data-v-5e91fbc4><span class="input-group-text" data-v-5e91fbc4> miles per week </span></div></div></div> '),e._ssrNode('<div class="col-md-6 col-12" data-v-5e91fbc4>',"</div>",[e._ssrNode('<div class="input-group" data-v-5e91fbc4>',"</div>",[e._ssrNode('<input placeholder="Location"'+e._ssrAttr("value",e.user.location)+' class="form-control" data-v-5e91fbc4> '),e._ssrNode('<div class="input-group-append" data-v-5e91fbc4>',"</div>",[e._ssrNode('<span class="input-group-text" data-v-5e91fbc4>',"</span>",[c("fa",{staticClass:"mr-1",attrs:{icon:"map-marker-alt"}})],1)])],2)])],2),e._ssrNode(' <div class="row mt-3" data-v-5e91fbc4><div class="col-md-6 col-12 mb-md-0 mb-3" data-v-5e91fbc4><input placeholder="Strava URL"'+e._ssrAttr("value",e.user.stravaUrl)+' class="form-control" data-v-5e91fbc4></div></div> <input type="submit" value="Update" class="btn btn-primary mt-3" data-v-5e91fbc4> '+(e.message?'<div class="mt-3" data-v-5e91fbc4>'+e._ssrEscape(" "+e._s(e.message)+" ")+"</div>":"\x3c!----\x3e"))],2)],2):e._e(),e._ssrNode(" "+(e.user.athlete_id?'<div class="settings-section pictures \n    row \n    mt-3 \n    w-100 w-md-auto" data-v-5e91fbc4><div class="col-md-4 col-12 mb-md-0 mb-3" data-v-5e91fbc4><div class="settings-section card p-3 mt-0" data-v-5e91fbc4><div class="settings-label mb-3" data-v-5e91fbc4> Profile Picture </div> <div class="row" data-v-5e91fbc4><div class="col-6 align-items-center align-content-center d-flex flex-wrap" data-v-5e91fbc4>'+(e.user.profilePicUrl?"<img"+e._ssrAttr("src",e.user.profilePicUrl)+' class="profile-pic" data-v-5e91fbc4>':"\x3c!----\x3e")+" "+(e.user.profilePicUrl?"\x3c!----\x3e":'<img src="/images/default.png" class="profile-pic" data-v-5e91fbc4>')+'</div> <div class="col-6" data-v-5e91fbc4><div data-v-5e91fbc4><label class="mb-2 btn btn-default" data-v-5e91fbc4>\n                Browse\n                <input type="file" name="image" hidden="hidden" data-v-5e91fbc4></label></div> <div data-v-5e91fbc4><button class="btn btn-primary" data-v-5e91fbc4> Upload </button></div></div></div> '+(e.profilePic?'<span class="pic-name mt-3" data-v-5e91fbc4>'+e._ssrEscape(" "+e._s(e.profilePic.name)+" ")+"</span>":"\x3c!----\x3e")+'</div></div> <div class="col-md-4 col-12 mb-md-0 mb-3" data-v-5e91fbc4><div class="settings-section card p-3 mt-0" data-v-5e91fbc4><div class="settings-label mb-3" data-v-5e91fbc4> Brand / Team Logo </div> <div class="row" data-v-5e91fbc4><div class="col-6 align-items-center align-content-center d-flex" data-v-5e91fbc4>'+(e.user.brandPicUrl?"<img"+e._ssrAttr("src",e.user.brandPicUrl)+' class="brand-pic mb-2" data-v-5e91fbc4>':"\x3c!----\x3e")+'</div> <div class="col-6" data-v-5e91fbc4><div data-v-5e91fbc4><label class="mb-2 mx-auto btn btn-default" data-v-5e91fbc4>\n                Browse\n                <input type="file" name="image" hidden="hidden" data-v-5e91fbc4></label></div> <div data-v-5e91fbc4><button class="btn btn-primary" data-v-5e91fbc4> Upload </button></div></div></div> '+(e.brandPic?'<span class="pic-name" data-v-5e91fbc4>'+e._ssrEscape(" "+e._s(e.brandPic.name)+" ")+"</span>":"\x3c!----\x3e")+'</div></div> <div class="col-md-4 col-12 mb-md-0 mb-3" data-v-5e91fbc4><div class="settings-section card p-3 pb-md-3 mt-0" data-v-5e91fbc4><div class="settings-label mb-3" data-v-5e91fbc4> Featured Image </div> <div class="row" data-v-5e91fbc4><div class="col-6 align-items-center align-content-center d-flex" data-v-5e91fbc4>'+(e.user.featuredPicUrl?"<img"+e._ssrAttr("src",e.user.featuredPicUrl)+' class="featured-pic mb-2" data-v-5e91fbc4>':"\x3c!----\x3e")+'</div> <div class="col-6" data-v-5e91fbc4><div data-v-5e91fbc4><label class="mb-2 mx-auto btn btn-default" data-v-5e91fbc4>\n                Browse\n                <input type="file" name="image" hidden="hidden" data-v-5e91fbc4></label></div> <div data-v-5e91fbc4><button class="btn btn-primary" data-v-5e91fbc4> Upload </button></div></div></div> '+(e.featuredPic?'<span class="pic-name" data-v-5e91fbc4>'+e._ssrEscape(" "+e._s(e.featuredPic.name)+" ")+"</span>":"\x3c!----\x3e")+"</div></div> "+(e.imageMessage?'<div class="mt-3 pl-3" data-v-5e91fbc4><strong data-v-5e91fbc4>'+e._ssrEscape(" "+e._s(e.imageMessage)+" ")+"</strong></div>":"\x3c!----\x3e")+"</div>":"\x3c!----\x3e")+' <div class="settings-section" data-v-5e91fbc4><div class="settings-label" data-v-5e91fbc4>Email</div> <div class="tag" data-v-5e91fbc4>'+e._ssrEscape(e._s(e.user.email))+"</div></div> "),e._ssrNode('<div class="settings-section" data-v-5e91fbc4>',"</div>",[e._ssrNode('<div class="settings-label" data-v-5e91fbc4>Athlete ID</div> '),e.user.athlete_id?e._ssrNode('<span class="athlete-id" data-v-5e91fbc4>',"</span>",[e._ssrNode('<div class="tag" data-v-5e91fbc4>',"</div>",[c("fa",{attrs:{icon:"user"}}),e._ssrNode(e._ssrEscape("   "+e._s(e.user.athlete_id)))],2),e._ssrNode(" "+(e.user.athlete_id?'<button class="btn btn-primary" data-v-5e91fbc4>\n        Unclaim\n      </button>':"\x3c!----\x3e"))],2):e._e(),e._ssrNode(" "+(e.user.athlete_id?"\x3c!----\x3e":'<form class="claim mb-2" data-v-5e91fbc4><div class="input-group" data-v-5e91fbc4><input pattern="^\\S*$" type="text" id="athleteIDInput" placeholder="Athlete ID (no spaces)" required="required"'+e._ssrAttr("value",e.claimInput)+' class="form-control" data-v-5e91fbc4> <span class="input-group-append" data-v-5e91fbc4><input value="Claim" type="submit" class="btn btn-primary" data-v-5e91fbc4></span></div></form>')+" "+(e.claimSuccess?'<div class="alert alert-success" data-v-5e91fbc4>'+e._ssrEscape(" \n      "+e._s(e.claimSuccess)+" \n    ")+"</div>":"\x3c!----\x3e")+" "+(e.claimFailure?'<div class="alert alert-danger" data-v-5e91fbc4>'+e._ssrEscape(" \n      "+e._s(e.claimFailure)+"\n    ")+"</div>":"\x3c!----\x3e"))],2),e._ssrNode(" "),e._ssrNode('<div class="settings-section" data-v-5e91fbc4>',"</div>",[e._ssrNode('<div class="settings-label" data-v-5e91fbc4>',"</div>",[e._ssrNode("Aliases "),c("fa",{attrs:{icon:"user-plus"}})],2),e._ssrNode(" "),e._ssrNode('<div class="aliases" data-v-5e91fbc4>',"</div>",e._l(e.user.aliases,function(t){return e.user.aliases.length>0?e._ssrNode('<div class="alias tag mr-2" data-v-5e91fbc4>',"</div>",[e._ssrNode(e._ssrEscape("\n        "+e._s(t)+"  \n        ")),e._ssrNode("<a data-v-5e91fbc4>","</a>",[c("fa",{attrs:{icon:"times"}})],1)],2):e._e()}),0),e._ssrNode(' <form class="claim mb-2" data-v-5e91fbc4><div class="input-group" data-v-5e91fbc4><input pattern="^\\S*$" type="text" id="athleteIDInput" placeholder="Alias Athlete ID (no spaces)" required="required"'+e._ssrAttr("value",e.aliasInput)+' class="form-control" data-v-5e91fbc4> <span class="input-group-append" data-v-5e91fbc4><input value="Claim" type="submit" class="btn btn-primary" data-v-5e91fbc4></span></div></form> '+(e.aliasSuccess?'<div class="alert alert-success" data-v-5e91fbc4>'+e._ssrEscape(" \n      "+e._s(e.aliasSuccess)+" \n    ")+"</div>":"\x3c!----\x3e")+" "+(e.aliasFailure?'<div class="alert alert-danger" data-v-5e91fbc4>'+e._ssrEscape(" \n      "+e._s(e.aliasFailure)+"\n    ")+"</div>":"\x3c!----\x3e"))],2),e._ssrNode(" "),e._ssrNode('<div class="settings-section danger-zone pb-4" data-v-5e91fbc4>',"</div>",[e._ssrNode('<div class="settings-label" data-v-5e91fbc4>Danger Zone</div> '),e.makeSure?e._e():e._ssrNode('<button class="btn btn-danger" data-v-5e91fbc4>',"</button>",[e._ssrNode("\n      Delete your account "),c("fa",{attrs:{icon:"trash-alt"}})],2),e._ssrNode(" "+(e.makeSure?'<div class="alert alert-info make-sure" data-v-5e91fbc4>\n      Are you sure? This cannot be undone.\n    </div>':"\x3c!----\x3e")+" "+(e.makeSure?'<button class="btn btn-default make-sure" data-v-5e91fbc4>\n      No\n    </button>':"\x3c!----\x3e")+" "+(e.makeSure?'<button class="btn btn-danger make-sure" data-v-5e91fbc4>\n      Yes, delete my account\n    </button>':"\x3c!----\x3e")+" "+(e.deleteSuccess?'<div class="alert alert-success" data-v-5e91fbc4>'+e._ssrEscape(" \n      "+e._s(e.deleteSuccess)+" \n    ")+"</div>":"\x3c!----\x3e"))],2)],2)])},[],!1,function(e){var t=c(114);t.__inject__&&t.__inject__(e)},"5e91fbc4","750d8839");t.default=component.exports},72:function(e,t,c){var content=c(115);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);var d=c(3).default;e.exports.__inject__=function(e){d("5f8583dc",content,!0,e)}}};
//# sourceMappingURL=7ae0c195eecc28f6e8c3.js.map