exports.ids=[46],exports.modules={338:function(e,t,n){"use strict";n.r(t);var c={components:{RaceHeader:()=>n.e(5).then(n.bind(null,369)),RaceActions:()=>n.e(90).then(n.bind(null,370)),RaceEditor:()=>n.e(11).then(n.bind(null,364)),ResultsTable:()=>n.e(13).then(n.bind(null,371))},head(){return{title:this.currentRace.name+" - RaceBase",meta:[{hid:"OpenGraph title",property:"og:title",content:this.currentRace.name},{hid:"OpenGraph image",property:"og:image",content:"https://racebase.run/images/opengraph/results.png"},{hid:"OpenGraph description",property:"og:description",content:this.currentRace.date+" at "+this.currentRace.location}]}},computed:{isLoggedIn:function(){return this.$store.getters["auth/isLoggedIn"]}},async asyncData({$axios:e,params:t,redirect:n,store:c}){let o=await e.$get("race/"+t.id),r={};o.message?n("/races/notfound"):r=await e.$get("race/"+o._id+"/events");var d={};if(c.getters["auth/isLoggedIn"])try{d=await e.$get("race/vote/"+t.id)}catch(e){d={},console.log(e)}let h={};return h=t.event?await e.$get("event/"+t.event):await e.$get("race/"+t.id+"/events/default"),{currentRace:o,eventList:r,results:await e.$get("result/list/"+o._id+"/event/"+h._id).catch(()=>{n("/races/notfound")}),voteData:d,event:h}},data:()=>({editMode:!1,addMode:!1,editingRace:!1,currentResult:{}}),methods:{loadResults:async function(){this.eventList=await this.$axios.$get("race/"+this.currentRace._id+"/events").catch(()=>{console.log("Something went wrong getting the events list.")}),this.results=await this.$axios.$get("result/list/"+this.currentRace._id+"/"+this.event._id).catch(()=>{console.log("Something went wrong.")}),this.teamResults=await this.$axios.$get("result/teamlist/"+this.currentRace._id+"/"+encodeURI(this.eventList[this.eventNum])).catch(()=>{console.log("Something went wrong.")}),await setTimeout(_,2e3)},loadRace:async function(e){this.currentRace=await this.$axios.$get("race/"+this.currentRace._id),e&&this.loadResults()},closeWindow:function(){this.addMode=!1,this.editMode=!1,this.editingRace=!1,this.currentResult={}},openAddWindow:function(){this.addMode=!0,this.editMode=!1,this.editingRace=!1},openEditWindow:function(e){this.addMode=!1,this.editMode=!0,this.currentResult=e},editRace:function(){this.addMode=!1,this.editMode=!1,this.addingRace=!1,this.editingRace=!0}},watch:{$route:async function(){this.$route.params.event?this.event=await this.$axios.$get("event/"+this.$route.params.event):this.event=await this.$axios.$get("race/"+this.$route.params.id+"/events/default"),this.updateResults()}}},o=n(1),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mx-auto w-90 w-md-100 mx-md-0 pl-md-5"},[e.currentRace?n("RaceHeader",{attrs:{race:e.currentRace}}):e._e(),e._ssrNode(" "),n("RaceActions",{staticClass:"mb-3",attrs:{eventList:e.eventList,race:e.currentRace,voteData:e.voteData},on:{openAddWindow:e.openAddWindow,editRace:e.editRace,loadRace:e.loadRace}}),e._ssrNode(" "),n("RaceEditor",{attrs:{addingRace:!1,editingRace:e.editingRace,race:e.currentRace},on:{closeWindow:e.closeWindow,load:e.loadRace}}),e._ssrNode(" "),n("ResultsTable",{attrs:{event:e.event,results:e.results,id:e.currentRace._id}})],2)}),[],!1,null,null,"3410aa7c");t.default=component.exports}};