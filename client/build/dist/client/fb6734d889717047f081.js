(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{524:function(e,t,r){var content=r(645);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("55f2d12f",content,!0,{sourceMap:!1})},644:function(e,t,r){"use strict";var n=r(524);r.n(n).a},645:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".profile-header h1[data-v-5ee8f1ec]{font-size:23px;font-weight:500}.profile-header h2[data-v-5ee8f1ec]{font-size:16px;font-weight:400}.profile-header .btn.follow[data-v-5ee8f1ec]{vertical-align:top;font-size:11px;font-weight:500;text-transform:uppercase;height:25px;padding:5px 7px}.profile-header .strava[data-v-5ee8f1ec]{color:#f67e2c}.profile-info .shoe[data-v-5ee8f1ec]{width:25px}h2.year[data-v-5ee8f1ec]{font-size:23px}h3.event-header[data-v-5ee8f1ec]{text-align:left;text-transform:uppercase;font-weight:500;font-size:18px}.results-table td[data-v-5ee8f1ec]{vertical-align:middle}.results-table .place[data-v-5ee8f1ec]{text-align:center;font-size:11px}.results-table .place .num[data-v-5ee8f1ec]{font-size:18px;font-weight:500}.results-table .title[data-v-5ee8f1ec]{color:#3976d0;font-size:17px;font-weight:500}.results-table .metadata[data-v-5ee8f1ec]{font-size:14px}.results-table .distance[data-v-5ee8f1ec]{font-weight:500}.results-table .time[data-v-5ee8f1ec]{font-family:DS Digital,Helvetica,sans-serif;font-size:27px;color:#468df5;text-align:right;padding-right:15px}.results-table .time .star[data-v-5ee8f1ec]{color:#3976d0}.brand[data-v-5ee8f1ec]{width:70px}.brand[data-v-5ee8f1ec],.user-image[data-v-5ee8f1ec]{display:block;margin:0 auto}.user-image[data-v-5ee8f1ec]{width:90%;border-radius:5px}.personal-records[data-v-5ee8f1ec]{margin:0 auto}.personal-records thead[data-v-5ee8f1ec]{width:100%;text-align:center;font-weight:500}.personal-records thead th[data-v-5ee8f1ec]{text-transform:uppercase;border:none;font-size:16px;color:grey;padding-bottom:0}.personal-records td[data-v-5ee8f1ec]{vertical-align:middle;padding:0 15px}.personal-records .distance[data-v-5ee8f1ec]{text-transform:uppercase;font-weight:500;font-size:16px}.personal-records .time[data-v-5ee8f1ec]{font-family:DS Digital;color:#3976d0;font-size:22px;text-align:right}.personal-records .more[data-v-5ee8f1ec]{text-align:right;font-style:italic;font-size:12px;text-transform:uppercase}.personal-records .more div[data-v-5ee8f1ec]{margin-top:15px}.personal-records .more a[data-v-5ee8f1ec]{text-decoration:underline}",""])},692:function(e,t,r){"use strict";r.r(t);r(80),r(20),r(588),r(41),r(57),r(216),r(590),r(115),r(19);var n=r(1),c=r(490),o=r.n(c),l=r(592),d=r.n(l),m=function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=d()(t.toLowerCase())||0).match(/(\d\s?k|\d\s?km|(meter)(s)?|00\s?m)/g)){e.next=13;break}return e.next=5,v(t);case 5:if(!((r=e.sent)>3e3&&Number.isInteger(r/1e3))){e.next=10;break}return e.abrupt("return",r/1e3+" km");case 10:return e.abrupt("return",r+"m");case 11:e.next=21;break;case 13:if(!t.match(/(mi)/g)){e.next=20;break}return e.next=16,h(t);case 16:return n=e.sent,e.abrupt("return",n+" mi");case 20:return e.abrupt("return","Unknown");case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","Unknown");case 27:case"end":return e.stop()}},e,this,[[0,23]])}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",parseInt(t.toLowerCase().replace(",","").replace(/\s?(k)(m)?(ilometers)?/g,"000m").replace(/\s?(meter)[s]?/g,"m").replace(" ","").match(/\d+(m)/g)[0].replace("m",""))||0);case 4:return e.prev=4,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",0);case 8:case"end":return e.stop()}},e,this,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",parseFloat(t.toLowerCase().replace(",","").replace(" ","").replace(/(mi)(le)?(s)?/g,"mi").match(/\d+(.)?\d*(mi)/g)[0].replace("mi",""))||0);case 4:return e.prev=4,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",0);case 8:case"end":return e.stop()}},e,this,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),f={head:function(){return{title:this.name+" - RaceBase",meta:[{hid:"OpenGraph Title",property:"og:title",content:this.athlete.name},{hid:"OpenGraph URL",property:"og:url",content:"https://racebase.io"+this.$route.fullPath},{hid:"OpenGraph Image",property:"og:image",content:this.athlete.profilePicUrl},{hid:"Description",name:"description",content:"View "+this.name+"'s race results on RaceBase, the Internet's first community sourced results database"},{hid:"OpenGraph Description",property:"og:description",content:"View "+this.name+"'s race results on RaceBase, the Internet's first community sourced results database"}]}},asyncData:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,c,l,d,v,h,f,_,x,C,w,k,y,R,U,I,L,z;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,n=t.params,c=t.$axios,l=t.redirect,d=r.state.auth.user,e.next=4,c.$get("user/athlete/"+n.id);case 4:return v=e.sent,e.next=7,c.$get("result/list/athlete/"+n.id);case 7:(!(h=e.sent)||h.length<1)&&l("/notfound"),f=v?v.name:h[0].athlete,n.id,e.t0=regeneratorRuntime.keys(h);case 12:if((e.t1=e.t0()).done){e.next=28;break}return _=e.t1.value,e.prev=14,x=h[_],e.next=18,m(x.event);case 18:x.distance=e.sent,C=new Date(x.date),x.year=C.getFullYear(),e.next=26;break;case 23:e.prev=23,e.t2=e.catch(14),console.log(e.t2);case 26:e.next=12;break;case 28:for(U in w=o.a.groupBy(h,"year"),k=o.a.groupBy(h,"distance"),y={},R=[],k)y[U]=o.a.sortBy(k[U],"time")[0],R.push(y[U]);return h=o.a.sortBy(Object.values(w),"year").reverse(),w=Object.keys(w).sort().reverse(),e.next=37,c.$get("user/claimed/"+n.id);case 37:return I=e.sent,L=I.claimed,z=I.user,e.abrupt("return",{user:d,athlete:v,results:h,years:w,records:y,recordsArray:R,claimed:L,claimedBy:z,name:f,id:n.id});case 41:case"end":return e.stop()}},e,this,[[14,23]])}));return function(t){return e.apply(this,arguments)}}(),computed:{isLoggedIn:function(){return this.$store.getters["auth/isLoggedIn"]}},methods:{claim:function(){var e=this;this.user&&this.$axios.$post("user/claim/"+this.user._id+"/"+this.id).then(function(t){e.getClaim()})},addAlias:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$axios.$post("user/"+this.user._id+"/alias/"+this.id).then(function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.success){e.next=4;break}return e.next=3,t.getClaim();case 3:t.$store.dispatch("auth/fetchUser");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getClaim:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.$get("user/claimed/"+this.id);case 2:t=e.sent,this.claimed=t.claimed,this.claimedBy=t.user;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},_=(r(644),r(18)),component=Object(_.a)(f,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.results.length<=0?r("div",{staticClass:"w-90 mx-auto mt-4"},[r("h1",[e._v(" That athlete doesn't exist! ")]),e._v("\n  Click "),r("nuxt-link",{attrs:{to:"/"}},[e._v("here")]),e._v(" to go home\n")],1):e._e(),e._v(" "),e.results.length>0?r("div",{staticClass:"row mw-100 pl-0 w-100 mx-0"},[r("div",{staticClass:"col-md-8 col-12 px-0 order-12 order-md-1"},[r("div",{staticClass:"profile mt-4 mb-4 w-90 mx-auto",attrs:{itemscope:"",itemtype:"http://schema.org/Person"}},[r("div",{staticClass:"profile-header mb-3"},[e.athlete.profilePicUrl?e._e():r("img",{staticClass:"profile-pic mr-3 d-inline-block",attrs:{src:"/images/default.png",itemprop:"image"}}),e._v(" "),e.athlete.profilePicUrl?r("img",{staticClass:"profile-pic mr-3 d-inline-block",attrs:{src:e.athlete.profilePicUrl.replace("http","https"),itemprop:"image"}}):e._e(),e._v(" "),r("div",{staticClass:"d-inline-block mr-3"},[r("h1",{attrs:{itemprop:"name"}},[e._v(" "+e._s(e.name)+" ")]),e._v(" "),r("h2",{staticClass:"mb-0"},[e._v("\n            @"+e._s(e.id)+"\n            \n            "),e.athlete.stravaUrl?r("a",{staticClass:"ml-3 strava",attrs:{href:e.athlete.stravaUrl,target:"_blank"}},[r("fa",{attrs:{icon:["fab","strava"]}}),e._v(" Strava\n            ")],1):e._e(),e._v(" "),r("a",{staticClass:"ml-3",attrs:{href:"https://twitter.com/intent/tweet?text="+encodeURI("Check out this profile on RaceBase! @racebaseio")+"&url=https://racebase.io/athlete/"+e.id+"&hashtags=racebase",target:"_blank","data-hashtags":"racebase"}},[r("fa",{attrs:{icon:["fab","twitter"]}}),e._v(" Tweet\n            ")],1)])]),e._v(" "),e.isLoggedIn?r("button",{staticClass:"btn btn-primary follow mt-3 mt-lg-0 d-none"},[e._v("\n          Follow\n        ")]):e._e()]),e._v(" "),e.athlete?r("div",{staticClass:"profile-info mb-2"},[r("div",{staticClass:"shoes mb-2"},[e.user.trainer?r("span",{staticClass:"trainer mr-3 d-block d-lg-inline-block"},[r("object",{staticClass:"shoe mr-1",attrs:{type:"image/svg+xml",data:"/images/trainer-blue.svg"}}),e._v("\n            "+e._s(e.user.trainer)+"\n          ")]):e._e(),e._v(" "),e.user.racer?r("span",{staticClass:"racer"},[r("object",{staticClass:"shoe mr-1",attrs:{type:"image/svg+xml",data:"/images/racer.svg"}}),e._v("\n            "+e._s(e.user.racer)+"\n          ")]):e._e()]),e._v(" "),r("div",{staticClass:"personal"},[e.user.mileage?r("span",{staticClass:"mileage mr-3"},[r("fa",{staticClass:"icon mr-1",attrs:{icon:"calendar-alt"}}),e._v("\n            "+e._s(e.user.mileage)+" MPW\n          ")],1):e._e(),e._v(" "),e.user.location?r("span",{staticClass:"location"},[r("fa",{staticClass:"icon mr-1",attrs:{icon:"map-marker-alt"}}),e._v(" "),r("span",{attrs:{itemprop:"homeLocation"}},[e._v(" "+e._s(e.user.location)+" ")])],1):e._e()])]):e._e(),e._v(" "),e.claimed?e._e():r("div",{staticClass:"claim-info"},[r("div",[e._v("\n          Is this you? \n          "),e.isLoggedIn?e._e():r("span",[r("nuxt-link",{attrs:{to:"/login"}},[e._v("Log In")]),e._v(" or \n            "),r("nuxt-link",{attrs:{to:"/signup"}},[e._v("Sign Up")]),e._v(" \n            to claim this athlete profile.\n          ")],1),e._v(" "),e.isLoggedIn?r("span",[e.user.athlete_id?e._e():r("span",[e._v("\n              Click "),r("a",{on:{click:function(t){return e.claim()}}},[e._v("here")]),e._v(" to claim this profile.\n            ")]),e._v(" "),e.user.athlete_id?r("span",[e._v("\n              Click "),r("a",{attrs:{href:"#"},on:{click:function(t){return e.addAlias()}}},[e._v("here")]),e._v(" to add this profile to your aliases.\n            ")]):e._e()]):e._e()])]),e._v(" "),e.claimed&&e.user.athlete_id!=e.id?r("div",{staticClass:"claim-info"},[r("div",[e._v("Claimed by "+e._s(e.claimedBy?e.claimedBy:"Anonymous"))]),e._v(" "),e.claimedBy?r("div",{staticClass:"smaller"},[e._v("\n          Click \n          "),r("a",{attrs:{href:"mailto:racebase@breeze.software"}},[e._v("here")]),e._v(" \n          to report a wrongfully claimed athlete.\n        ")]):e._e()]):e._e()]),e._v(" "),e.results&&0!=e.results.length||!e.athlete?e._e():r("h3",[e._v("No Results")]),e._v(" "),e._l(e.results,function(t,n){return r("div",{staticClass:"mb-4 w-90 mx-auto"},[r("h2",{staticClass:"year mb-3"},[e._v(" "+e._s(e.years[n])+" ")]),e._v(" "),r("div",{staticClass:"results-container"},[r("div",{staticClass:"table-responsive mb-4"},[r("table",{staticClass:"results-table table table-striped mb-0"},[r("tbody",e._l(t,function(t){return r("tr",[r("td",{staticClass:"place"},[r("div",{staticClass:"num"},[e._v(" "+e._s(t.place)+" ")]),e._v(" "),r("fa",{staticClass:"d-block mx-auto",attrs:{icon:"trophy"}})],1),e._v(" "),r("td",{staticClass:"race"},[r("nuxt-link",{staticClass:"title mr-2",attrs:{to:"/races/"+t.race_id}},[e._v("\n                    "+e._s(t.race)+"\n                  ")]),e._v(" "),r("div",{staticClass:"distance d-inline-block"},[e._v(" "+e._s(t.distance)+" ")]),e._v(" "),r("div",{staticClass:"metadata mt-2"},[r("span",{staticClass:"date mr-2"},[r("fa",{staticClass:"icon mr-1",attrs:{icon:"calendar-alt"}}),e._v("\n                      "+e._s(t.date)+"\n                    ")],1),e._v(" "),r("span",{staticClass:"team no-wrap"},[r("fa",{staticClass:"icon mr-1",attrs:{icon:["fab","font-awesome-flag"]}}),e._v(" "),t.team_id?r("nuxt-link",{attrs:{to:"",to:"/team/"+t.team_id}},[e._v("\n                        "+e._s(t.team)+"\n                      ")]):e._e(),e._v(" "),t.team_id?e._e():r("span",[e._v(e._s(t.team))])],1)])],1),e._v(" "),r("td",{staticClass:"time"},[e._v("\n                  "+e._s(t.time)),e.recordsArray.includes(t)?r("span",{staticClass:"star"},[e._v("*")]):e._e()])])}),0)])])])])})],2),e._v(" "),r("div",{staticClass:"col-12 col-md-4 pr-0 pl-0 pr-md-2 mt-4 ml-0 order-1 order-md-12 w-100"},[e.athlete.brandPicUrl&&e.athlete.featuredPicUrl?e._e():r("div",{staticClass:"mb-3",staticStyle:{"text-align":"center"}},[e._v(" \n      Want to customize this page? "),r("br"),e._v(" "),e.isLoggedIn?r("nuxt-link",{attrs:{to:"/user/settings"}},[e._v(" Claim this profile ")]):e._e(),e._v(" "),e.isLoggedIn?e._e():r("span",[r("nuxt-link",{attrs:{to:"/login"}},[e._v(" Log In ")]),e._v(" or\n        "),r("nuxt-link",{attrs:{to:"/signup"}},[e._v(" Sign Up ")])],1),e._v(" "),r("br"),e._v(" to add custom images.\n    ")],1),e._v(" "),e.athlete.brandPicUrl?r("img",{staticClass:"brand-pic brand mb-4",attrs:{src:e.athlete.brandPicUrl.replace("http","https")}}):e._e(),e._v(" "),e.athlete.featuredPicUrl?r("img",{staticClass:"user-image mb-4",attrs:{src:e.athlete.featuredPicUrl.replace("http","https")}}):e._e(),e._v(" "),r("div",{staticClass:"table-responsive personal-records mt-4 mx-auto w-90"},[r("table",{staticClass:"table mb-2"},[e._m(0),e._v(" "),r("tbody",[e._l(e.records,function(t,n){return r("tr",[r("td",{staticClass:"distance"},[e._v(e._s(n))]),e._v(" "),r("td",{staticClass:"time"},[e._v(e._s(t.time))])])}),e._v(" "),Object.keys(e.records).length<3?r("tr",{staticClass:"more"},[r("td",{attrs:{colspan:"2"}},[e.isLoggedIn?r("div",[r("nuxt-link",{attrs:{to:"/user/content"}},[e._v("Add more results")])],1):e._e(),e._v(" "),e.isLoggedIn?e._e():r("div",[r("nuxt-link",{attrs:{to:"/login"}},[e._v("Log in")]),e._v(" to add more results\n              ")],1)])]):e._e()],2)])])])]):e._e()])},[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{staticClass:"pb-2",attrs:{colspan:"2"}},[this._v(" Personal Records ")])])])}],!1,null,"5ee8f1ec",null);t.default=component.exports}}]);