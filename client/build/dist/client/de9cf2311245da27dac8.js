(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{593:function(e,t,n){var content=n(702);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("922aface",content,!0,{sourceMap:!1})},701:function(e,t,n){"use strict";var r=n(593);n.n(r).a},702:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".alert[data-v-215c11ec]{width:100%}",""])},844:function(e,t,n){"use strict";n.r(t);n(20);var r=n(2),c={components:{RaceEditor:function(){return n.e(13).then(n.bind(null,872))},RaceTable:function(){return n.e(17).then(n.bind(null,871))}},head:function(){return{title:"RaceBase - Your Content"}},middleware:"auth",asyncData:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){var n,r,c,o,d,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.$axios,c=t.params,o=c.page||"1",d=n.state.auth.user,e.next=5,r.$get("user/"+d._id+"/races");case 5:return l=e.sent,h=l.docs,f=l.page==l.pages,h=h?h.reverse():{},e.abrupt("return",{myRaces:h,currentPage:o,lastPage:f});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),data:function(){return{editingRace:!1,addingRace:!1,input:{name:"",location:"",link:"",date:"",csv:""},searchInput:"",currentPage:0,currentRace:{},myRaces:{}}},methods:{loadRaces:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$store.state.auth.user._id,e.next=3,this.$axios.$get("user/"+t+"/races");case 3:n=e.sent,this.myRaces&&(this.myRaces=n.docs?n.docs.reverse():{});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),closeWindow:function(){this.addingRace=!1,this.editingRace=!1},addRace:function(){this.addingRace=!0,this.editingRace=!1,this.currentRace={}},editRace:function(e){this.currentRace=e,this.editingRace=!0,this.addingRace=!1},deleteRace:function(e){var t=this;this.$axios.$delete("race/"+e).then(function(e){t.loadRaces()})},search:function(e){var t=this;this.searchInput?this.$axios.$get("search/user/races/"+this.searchInput).then(function(n){!e||n.length>0?(t.myRaces=n,t.searching=!0):t.searching=!1}):this.loadRaces()}}},o=(n(701),n(14)),component=Object(o.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"w-90 mx-auto"},[n("h1",{staticClass:"mt-4"},[e._v(" Your Content ")]),e._v(" "),n("RaceEditor",{attrs:{addingRace:e.addingRace,editingRace:e.editingRace,race:e.currentRace},on:{closeWindow:e.closeWindow,load:e.loadRaces}}),e._v(" "),e.addingRace?e._e():n("a",{staticClass:"btn btn-default add-race mt-3",on:{click:function(t){return e.addRace()}}},[e._v("\n      Add Race Â "),n("fa",{attrs:{icon:"pencil-alt"}})],1),e._v(" "),n("form",{staticClass:"search-form mb-3 mt-3 mx-auto",on:{submit:function(t){return t.preventDefault(),e.search(!1)}}},[n("div",{staticClass:"input-group search home-search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.searchInput},on:{keyup:function(t){return e.search(!0)},input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),e._v(" "),n("span",{staticClass:"input-group-append",attrs:{id:"basic-addon2"}},[n("span",{staticClass:"input-group-text"},[n("fa",{attrs:{icon:"search"},on:{click:function(t){return e.search(!1)}}})],1)])])]),e._v(" "),n("div",{staticClass:"no-races user-no-races mt-3"},[0!=Object.keys(e.myRaces).length||e.addingRace?e._e():n("div",{staticClass:"alert alert-info"},[e._v(' \n        You haven\'t added any races. Add one by clicking "Add Race" above. \n      ')])])],1),e._v(" "),n("RaceTable",{attrs:{races:e.myRaces,lastPage:e.lastPage,currentPage:e.currentPage}})],1)},[],!1,null,"215c11ec",null);t.default=component.exports}}]);