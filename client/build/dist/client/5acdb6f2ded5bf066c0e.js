(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{535:function(t,e,n){var content=n(662);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("8c529bb4",content,!0,{sourceMap:!1})},661:function(t,e,n){"use strict";var c=n(535);n.n(c).a},662:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,"a.btn-danger[data-v-15ba36ee]{color:#fff}@media (min-width:992px){.card[data-v-15ba36ee]{width:75%!important}}",""])},703:function(t,e,n){"use strict";n.r(e);n(57),n(79),n(41);var c={props:["editingRace","addingRace","race","load"],data:function(){return{input:{name:"",location:"",link:"",date:"",csv:""},success:"",failure:"",createdLink:"",fileChosen:!1}},watch:{race:function(t,e){this.input=t}},created:function(){this.input=this.race||{}},methods:{createRace:function(){var t=this;this.$axios.$post("race/",this.input).then(function(e){e&&(t.success="Successfully created race.",t.createdLink="/races/"+e.race._id,t.$emit("load"))})},updateRace:function(){var t=this,e=!1;this.input.csv&&(e=!0),this.$axios.$put("race/"+this.race._id,this.input).then(function(n){n&&(t.success="Successfully updated race.",t.$emit("load",e))})},closeWindow:function(){this.success="",this.failure="",this.$emit("closeWindow")},deleteRace:function(){var t=this;this.$axios.$delete("race/"+this.race._id).then(function(e){t.$router.push("/user/content"),t.closeWindow()})},processFile:function(t){this.fileChosen=t.target.files[0].name;var e=new FileReader,n=this;e.onload=function(t){var c=e.result.split("\n");c[0]=c[0].toLowerCase().replace(/\s+/g,"_");var o=c.join("\n");n.input.csv=o},e.readAsText(t.target.files[0])}}},o=(n(661),n(18)),component=Object(o.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editingRace||t.addingRace?n("form",{staticClass:"card w-100",on:{submit:function(e){e.preventDefault(),t.editingRace?t.updateRace():t.createRace()}}},[n("div",{staticClass:"card-body"},[n("span",{staticClass:"close",on:{click:function(e){return t.closeWindow()}}},[n("fa",{attrs:{icon:["far","times-circle"]}})],1),t._v(" "),n("h5",{staticClass:"card-title mb-3"},[t.addingRace?n("span",[t._v(" Add Race ")]):t._e(),t._v(" "),t.editingRace?n("span",[t._v(" Edit Race ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-3 col-form-label",attrs:{for:"nameInput"}},[t._v(" Race Name* ")]),t._v(" "),n("div",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input.name,expression:"input.name"}],staticClass:"form-control",attrs:{placeholder:"Race Name",type:"text",required:""},domProps:{value:t.input.name},on:{input:function(e){e.target.composing||t.$set(t.input,"name",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"locationInput"}},[t._v(" Location* ")]),t._v(" "),n("div",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input.location,expression:"input.location"}],staticClass:"form-control",attrs:{placeholder:"Location",type:"text",required:""},domProps:{value:t.input.location},on:{input:function(e){e.target.composing||t.$set(t.input,"location",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"dateInput"}},[t._v(" Date* ")]),t._v(" "),n("div",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input.date,expression:"input.date"}],staticClass:"form-control",attrs:{pattern:"^(0[1-9]|1[012]|\\w*)(\\s|[/])(0?[1-9]|[12][0-9]|3[01])(\\s|[/])\\d\\d\\d\\d$",placeholder:"Month DD YYYY",type:"text",required:""},domProps:{value:t.input.date},on:{input:function(e){e.target.composing||t.$set(t.input,"date",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"linkInput"}},[t._v(" Link ")]),t._v(" "),n("div",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input.link,expression:"input.link"}],staticClass:"form-control",attrs:{placeholder:"http://race.url",type:"text"},domProps:{value:t.input.link},on:{input:function(e){e.target.composing||t.$set(t.input,"link",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"linkInput"}},[t._v(" CSV File ")]),t._v(" "),n("div",{staticClass:"col-sm-9"},[n("label",{staticClass:"btn btn-default"},[t.fileChosen?t._e():n("span",[t._v(" Choose File ")]),t._v(" "),t.fileChosen?n("span",[t._v(" "+t._s(t.fileChosen)+" ")]):t._e(),t._v(" "),n("input",{staticClass:"file-input",attrs:{type:"file",name:"csvInput",hidden:""},on:{change:function(e){return t.processFile(e)}}})])])]),t._v(" "),n("div",{staticClass:"btn-group-wrap"},[n("div",{staticClass:"btn-group panel-buttons"},[n("input",{staticClass:"btn btn-primary",attrs:{type:"submit"},domProps:{value:t.editingRace?"Update":"Create"}}),t._v(" "),t.editingRace?n("a",{staticClass:"btn btn-danger",on:{click:t.deleteRace}},[t._v("\n            Delete \n            "),n("fa",{attrs:{icon:["far","trash-alt"]}})],1):t._e()])]),t._v(" "),n("div",{staticClass:"mt-3"},[t.success?n("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(t._s(t.success))]):t._e(),t._v(" "),t.failure?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(t._s(t.failure))]):t._e(),t._v(" "),t.success&&t.addingRace?n("span",[t._v("\n        Click "),n("nuxt-link",{attrs:{to:t.createdLink}},[t._v("here")]),t._v(" to visit your new race.\n      ")],1):t._e()])])]):t._e()},[],!1,null,"15ba36ee",null);e.default=component.exports}}]);