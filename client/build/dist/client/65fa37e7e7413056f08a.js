(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{461:function(t,e,r){var content=r(569);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(10).default)("18c964c0",content,!0,{sourceMap:!1})},568:function(t,e,r){"use strict";var n=r(461);r.n(n).a},569:function(t,e,r){(t.exports=r(9)(!1)).push([t.i,".profile .input-group-text[data-v-493168f3]{font-size:14px}.profile .input-group-text img[data-v-493168f3]{opacity:.7;width:25px}.profile-pic[data-v-493168f3]{border-radius:7px;overflow:hidden;display:inline-block;width:80px;height:80px}.brand-pic[data-v-493168f3],.featured-pic[data-v-493168f3],.profile-pic[data-v-493168f3]{margin:0 auto}.featured-pic[data-v-493168f3]{width:100px;border-radius:5px}.card .btn[data-v-493168f3]{display:table;margin:0 auto}.card .settings-label[data-v-493168f3]{text-align:center}.settings-label[data-v-493168f3]{text-transform:uppercase;font-weight:500;font-size:13px;margin-bottom:10px}.tag[data-v-493168f3]{font-size:14px;vertical-align:middle;border-radius:4px;border:1px solid #ccc;padding:6px 12px;white-space:nowrap;margin-bottom:9px}.claim[data-v-493168f3],.tag[data-v-493168f3]{display:inline-block}.claim[data-v-493168f3]{width:270px}.claim .btn.btn-primary[data-v-493168f3]{margin-top:0}.claim-prompt[data-v-493168f3]{font-size:20px;text-align:center;color:#777}.claim-prompt .btn[data-v-493168f3]{text-transform:uppercase;font-size:18px;font-weight:500}",""])},732:function(t,e,r){"use strict";r.r(e);var n=r(7),l=(r(22),r(2)),c={data:function(){return{id:"",claimInput:"",claimFailure:"",claimSuccess:"",aliasSuccess:"",aliasFailure:"",aliasInput:"",aliases:[],profilePic:null,brandPic:null,featuredPic:null,message:"",imageMessage:""}},asyncData:function(){var t=Object(l.a)(regeneratorRuntime.mark(function t(e){var r,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,e.$axios,l=Object(n.a)({},r.state.auth.user),t.abrupt("return",{user:l,id:l._id,publicLogs:l.publicLogs});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),components:{ProfilePic:function(){return r.e(1).then(r.bind(null,757))},SettingsNav:function(){return r.e(9).then(r.bind(null,764))}},methods:{loadUser:function(){var t=Object(l.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("auth/fetchUser");case 2:this.user=Object(n.a)({},this.$store.state.auth.user),this.currentEmail=this.user.email;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addAlias:function(){var t=this;this.$axios.$post("user/"+this.id+"/alias/"+this.aliasInput).then(function(e){e.failure?(t.aliasSuccess=null,t.aliasFailure=e.failure):e.success&&(t.aliasFailure=null,t.aliasSuccess=e.success,t.loadUser())}).catch(function(e){t.aliasFailure=e.response.data,t.aliasSuccess=null})},removeAlias:function(t){var e=this;this.$axios.$delete("user/"+this.id+"/alias/"+t).then(function(t){e.aliasSuccess=null,e.aliasFailure=null,e.loadUser()}).catch(function(t){e.aliasFailure=t.response.data,e.aliasSuccess=null})},unclaim:function(t){var e=this;this.$axios.$post("user/unclaim/athlete").then(function(t){e.claimSuccess=t.success,e.claimFailure=null,e.loadUser()}).catch(function(t){console.log(t),e.claimFailure=t.response.data,e.claimSuccess=null})},updateProfile:function(){var t=this;this.$axios.$put("user/"+this.id,this.user).then(function(e){t.message="Profile updated.",t.loadUser()}).catch(function(e){t.message=e.response.data})},onProfilePicChanged:function(t){this.profilePic=t.target.files[0]},onBrandPicChanged:function(t){this.brandPic=t.target.files[0]},onFeaturedPicChanged:function(t){this.featuredPic=t.target.files[0]},uploadProfilePic:function(){var t=this,e=new FormData;e.append("image",this.profilePic),this.$axios.$post("user/"+this.user._id+"/profile_pic",e).then(function(e){t.imageMessage="Profile updated.",t.loadUser()}).catch(function(e){console.log(e),t.imageMessage=e.response.data})},uploadBrandPic:function(){var t=this,e=new FormData;e.append("image",this.brandPic),this.$axios.$post("user/"+this.user._id+"/brand_pic",e).then(function(e){t.imageMessage="Profile updated.",t.loadUser()}).catch(function(e){console.log(e),t.imageMessage=e.response.data})},uploadFeaturedPic:function(){var t=this,e=new FormData;e.append("image",this.featuredPic),this.$axios.$post("user/"+this.user._id+"/featured_pic",e).then(function(e){t.imageMessage="Profile updated.",t.loadUser()}).catch(function(e){console.log(e),t.imageMessage=e.response.data})},changeLogType:function(){var t=this;console.log(this.publicLogs),this.$axios.$put("user/"+this.id,{publicLogs:this.publicLogs}).then(function(e){t.loadUser()}).catch(function(e){console.log(e),t.emailMessage=e.response.data})}}},o=(r(568),r(14)),component=Object(o.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mx-auto w-90 w-md-100 mx-md-0 pl-md-5"},[r("h1",{staticClass:"mt-4"},[r("fa",{attrs:{icon:"cogs"}}),t._v(" Profile \n  ")],1),t._v(" "),r("SettingsNav",{attrs:{coach:t.user.coach}}),t._v(" "),t.user.athlete_id?t._e():r("div",{staticClass:"claim-prompt my-4"},[r("div",[t._v(" To get started with your profile... ")]),t._v(" "),r("nuxt-link",{staticClass:"btn btn-primary mt-3",attrs:{to:"/signup/claim"}},[t._v("Claim your Athlete ID")])],1),t._v(" "),t.user.athlete_id?r("div",{staticClass:"settings-section"},[r("div",{staticClass:"settings-label"},[t._v("Athlete ID")]),t._v(" "),t.user.athlete_id?r("div",{staticClass:"athlete-id d-flex align-items-center mb-3"},[r("div",{staticClass:"tag mb-0 mr-2"},[r("fa",{attrs:{icon:"user"}}),t._v("   "+t._s(t.user.athlete_id))],1),t._v(" "),t.user.athlete_id?r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.unclaim(t.user.athlete_id)}}},[t._v("\n        Unclaim\n      ")]):t._e()]):t._e()]):t._e(),t._v(" "),t.user.athlete_id?r("div",{staticClass:"settings-section mb-4"},[r("div",{staticClass:"settings-label"},[t._v("Logs")]),t._v(" "),r("div",[r("label",{staticClass:"form-check-label mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.publicLogs,expression:"publicLogs"}],attrs:{type:"radio"},domProps:{value:!0,checked:t._q(t.publicLogs,!0)},on:{change:function(e){t.publicLogs=!0}}}),t._v(" Public "),r("fa",{attrs:{icon:"globe-americas"}}),t._v("  \n        "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.publicLogs,expression:"publicLogs"}],attrs:{type:"radio"},domProps:{value:!1,checked:t._q(t.publicLogs,!1)},on:{change:function(e){t.publicLogs=!1}}}),t._v(" Private "),r("fa",{attrs:{icon:"lock"}})],1)]),t._v(" "),r("div",{staticClass:"btn btn-primary btn-small",on:{click:t.changeLogType}},[t._v("Save")])]):t._e(),t._v(" "),t.user.athlete_id?r("div",{staticClass:"settings-section"},[r("div",{staticClass:"settings-label"},[t._v("Profile")]),t._v(" "),r("form",{staticClass:"profile mb-4 w-md-75 w-100",on:{submit:function(e){return e.preventDefault(),t.updateProfile()}}},[r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-md-6 col-12 mb-md-0 mb-3"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.trainer,expression:"user.trainer"}],staticClass:"form-control",attrs:{placeholder:"Current Trainer"},domProps:{value:t.user.trainer},on:{input:function(e){e.target.composing||t.$set(t.user,"trainer",e.target.value)}}}),t._v(" "),t._m(0)])]),t._v(" "),r("div",{staticClass:"col-md-6 col-12"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.racer,expression:"user.racer"}],staticClass:"form-control",attrs:{placeholder:"Current Racer"},domProps:{value:t.user.racer},on:{input:function(e){e.target.composing||t.$set(t.user,"racer",e.target.value)}}}),t._v(" "),t._m(1)])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 col-12 mb-md-0 mb-3"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.mileage,expression:"user.mileage"}],staticClass:"form-control",attrs:{placeholder:"Weekly Mileage"},domProps:{value:t.user.mileage},on:{input:function(e){e.target.composing||t.$set(t.user,"mileage",e.target.value)}}}),t._v(" "),t._m(2)])]),t._v(" "),r("div",{staticClass:"col-md-6 col-12"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.location,expression:"user.location"}],staticClass:"form-control",attrs:{placeholder:"Location"},domProps:{value:t.user.location},on:{input:function(e){e.target.composing||t.$set(t.user,"location",e.target.value)}}}),t._v(" "),r("div",{staticClass:"input-group-append"},[r("span",{staticClass:"input-group-text"},[r("fa",{staticClass:"mr-1",attrs:{icon:"map-marker-alt"}})],1)])])])]),t._v(" "),r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"col-md-6 col-12 mb-md-0 mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.stravaUrl,expression:"user.stravaUrl"}],staticClass:"form-control",attrs:{placeholder:"Strava URL"},domProps:{value:t.user.stravaUrl},on:{input:function(e){e.target.composing||t.$set(t.user,"stravaUrl",e.target.value)}}})])]),t._v(" "),r("input",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit",value:"Update"}}),t._v(" "),t.message?r("div",{staticClass:"mt-3"},[t._v(" "+t._s(t.message)+" ")]):t._e()])]):t._e(),t._v(" "),t.user.athlete_id?r("div",{staticClass:"settings-section pictures \n    row \n    mt-3 \n    w-100 w-md-auto"},[r("div",{staticClass:"col-md-4 col-12 mb-md-0 mb-3"},[r("div",{staticClass:"settings-section card p-3 mt-0"},[r("div",{staticClass:"settings-label mb-3"},[t._v(" Profile Picture ")]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"profile-pic"},[r("ProfilePic",{attrs:{url:t.user.profilePicUrl}})],1),t._v(" "),r("div",{staticClass:"col-6"},[r("div",[r("label",{staticClass:"mb-2 btn btn-default"},[t._v("\n                Browse\n                "),r("input",{attrs:{type:"file",name:"image",hidden:""},on:{change:t.onProfilePicChanged}})])]),t._v(" "),r("div",[r("button",{staticClass:"btn btn-primary",on:{click:t.uploadProfilePic}},[t._v(" Upload ")])])])]),t._v(" "),t.profilePic?r("span",{staticClass:"pic-name mt-3"},[t._v(" "+t._s(t.profilePic.name)+" ")]):t._e()])]),t._v(" "),r("div",{staticClass:"col-md-4 col-12 mb-md-0 mb-3"},[r("div",{staticClass:"settings-section card p-3 mt-0"},[r("div",{staticClass:"settings-label mb-3"},[t._v(" Brand / Team Logo ")]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6 align-items-center align-content-center d-flex"},[t.user.brandPicUrl?r("img",{staticClass:"brand-pic mb-2",attrs:{src:t.user.brandPicUrl}}):t._e()]),t._v(" "),r("div",{staticClass:"col-6"},[r("div",[r("label",{staticClass:"mb-2 mx-auto btn btn-default"},[t._v("\n                Browse\n                "),r("input",{attrs:{type:"file",name:"image",hidden:""},on:{change:t.onBrandPicChanged}})])]),t._v(" "),r("div",[r("button",{staticClass:"btn btn-primary",on:{click:t.uploadBrandPic}},[t._v(" Upload ")])])])]),t._v(" "),t.brandPic?r("span",{staticClass:"pic-name"},[t._v(" "+t._s(t.brandPic.name)+" ")]):t._e()])]),t._v(" "),r("div",{staticClass:"col-md-4 col-12 mb-md-0 mb-3"},[r("div",{staticClass:"settings-section card p-3 pb-md-3 mt-0"},[r("div",{staticClass:"settings-label mb-3"},[t._v(" Featured Image ")]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6 align-items-center align-content-center d-flex"},[t.user.featuredPicUrl?r("img",{staticClass:"featured-pic mb-2",attrs:{src:t.user.featuredPicUrl}}):t._e()]),t._v(" "),r("div",{staticClass:"col-6"},[r("div",[r("label",{staticClass:"mb-2 mx-auto btn btn-default"},[t._v("\n                Browse\n                "),r("input",{attrs:{type:"file",name:"image",hidden:""},on:{change:t.onFeaturedPicChanged}})])]),t._v(" "),r("div",[r("button",{staticClass:"btn btn-primary",on:{click:t.uploadFeaturedPic}},[t._v(" Upload ")])])])]),t._v(" "),t.featuredPic?r("span",{staticClass:"pic-name"},[t._v(" "+t._s(t.featuredPic.name)+" ")]):t._e()])]),t._v(" "),t.imageMessage?r("div",{staticClass:"mt-3 pl-3"},[r("strong",[t._v(" "+t._s(t.imageMessage)+" ")])]):t._e()]):t._e()],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[e("img",{staticClass:"shoe mr-1",attrs:{src:"/images/trainer.svg"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[e("img",{staticClass:"shoe mr-1",attrs:{src:"/images/racer.svg"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[this._v(" miles per week ")])])}],!1,null,"493168f3",null);e.default=component.exports}}]);