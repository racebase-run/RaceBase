(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{427:function(e,t,n){var map={"./af":298,"./af.js":298,"./ar":299,"./ar-dz":300,"./ar-dz.js":300,"./ar-kw":301,"./ar-kw.js":301,"./ar-ly":302,"./ar-ly.js":302,"./ar-ma":303,"./ar-ma.js":303,"./ar-sa":304,"./ar-sa.js":304,"./ar-tn":305,"./ar-tn.js":305,"./ar.js":299,"./az":306,"./az.js":306,"./be":307,"./be.js":307,"./bg":308,"./bg.js":308,"./bm":309,"./bm.js":309,"./bn":310,"./bn.js":310,"./bo":311,"./bo.js":311,"./br":312,"./br.js":312,"./bs":313,"./bs.js":313,"./ca":314,"./ca.js":314,"./cs":315,"./cs.js":315,"./cv":316,"./cv.js":316,"./cy":317,"./cy.js":317,"./da":318,"./da.js":318,"./de":319,"./de-at":320,"./de-at.js":320,"./de-ch":321,"./de-ch.js":321,"./de.js":319,"./dv":322,"./dv.js":322,"./el":323,"./el.js":323,"./en-SG":324,"./en-SG.js":324,"./en-au":325,"./en-au.js":325,"./en-ca":326,"./en-ca.js":326,"./en-gb":327,"./en-gb.js":327,"./en-ie":328,"./en-ie.js":328,"./en-il":329,"./en-il.js":329,"./en-nz":330,"./en-nz.js":330,"./eo":331,"./eo.js":331,"./es":332,"./es-do":333,"./es-do.js":333,"./es-us":334,"./es-us.js":334,"./es.js":332,"./et":335,"./et.js":335,"./eu":336,"./eu.js":336,"./fa":337,"./fa.js":337,"./fi":338,"./fi.js":338,"./fo":339,"./fo.js":339,"./fr":340,"./fr-ca":341,"./fr-ca.js":341,"./fr-ch":342,"./fr-ch.js":342,"./fr.js":340,"./fy":343,"./fy.js":343,"./ga":344,"./ga.js":344,"./gd":345,"./gd.js":345,"./gl":346,"./gl.js":346,"./gom-latn":347,"./gom-latn.js":347,"./gu":348,"./gu.js":348,"./he":349,"./he.js":349,"./hi":350,"./hi.js":350,"./hr":351,"./hr.js":351,"./hu":352,"./hu.js":352,"./hy-am":353,"./hy-am.js":353,"./id":354,"./id.js":354,"./is":355,"./is.js":355,"./it":356,"./it-ch":357,"./it-ch.js":357,"./it.js":356,"./ja":358,"./ja.js":358,"./jv":359,"./jv.js":359,"./ka":360,"./ka.js":360,"./kk":361,"./kk.js":361,"./km":362,"./km.js":362,"./kn":363,"./kn.js":363,"./ko":364,"./ko.js":364,"./ku":365,"./ku.js":365,"./ky":366,"./ky.js":366,"./lb":367,"./lb.js":367,"./lo":368,"./lo.js":368,"./lt":369,"./lt.js":369,"./lv":370,"./lv.js":370,"./me":371,"./me.js":371,"./mi":372,"./mi.js":372,"./mk":373,"./mk.js":373,"./ml":374,"./ml.js":374,"./mn":375,"./mn.js":375,"./mr":376,"./mr.js":376,"./ms":377,"./ms-my":378,"./ms-my.js":378,"./ms.js":377,"./mt":379,"./mt.js":379,"./my":380,"./my.js":380,"./nb":381,"./nb.js":381,"./ne":382,"./ne.js":382,"./nl":383,"./nl-be":384,"./nl-be.js":384,"./nl.js":383,"./nn":385,"./nn.js":385,"./pa-in":386,"./pa-in.js":386,"./pl":387,"./pl.js":387,"./pt":388,"./pt-br":389,"./pt-br.js":389,"./pt.js":388,"./ro":390,"./ro.js":390,"./ru":391,"./ru.js":391,"./sd":392,"./sd.js":392,"./se":393,"./se.js":393,"./si":394,"./si.js":394,"./sk":395,"./sk.js":395,"./sl":396,"./sl.js":396,"./sq":397,"./sq.js":397,"./sr":398,"./sr-cyrl":399,"./sr-cyrl.js":399,"./sr.js":398,"./ss":400,"./ss.js":400,"./sv":401,"./sv.js":401,"./sw":402,"./sw.js":402,"./ta":403,"./ta.js":403,"./te":404,"./te.js":404,"./tet":405,"./tet.js":405,"./tg":406,"./tg.js":406,"./th":407,"./th.js":407,"./tl-ph":408,"./tl-ph.js":408,"./tlh":409,"./tlh.js":409,"./tr":410,"./tr.js":410,"./tzl":411,"./tzl.js":411,"./tzm":412,"./tzm-latn":413,"./tzm-latn.js":413,"./tzm.js":412,"./ug-cn":414,"./ug-cn.js":414,"./uk":415,"./uk.js":415,"./ur":416,"./ur.js":416,"./uz":417,"./uz-latn":418,"./uz-latn.js":418,"./uz.js":417,"./vi":419,"./vi.js":419,"./x-pseudo":420,"./x-pseudo.js":420,"./yo":421,"./yo.js":421,"./zh-cn":422,"./zh-cn.js":422,"./zh-hk":423,"./zh-hk.js":423,"./zh-tw":424,"./zh-tw.js":424};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=427},456:function(e,t,n){var content=n(562);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("30e04d60",content,!0,{sourceMap:!1})},561:function(e,t,n){"use strict";var r=n(456);n.n(r).a},562:function(e,t,n){(t=n(11)(!1)).push([e.i,"h3[data-v-7d2722c6]{color:#777}h4[data-v-7d2722c6]{font-size:18px}.btn-default[data-v-7d2722c6],h4[data-v-7d2722c6]{text-transform:uppercase}.btn-default[data-v-7d2722c6]{font-size:14px;padding:3px 6px}",""]),e.exports=t},769:function(e,t,n){"use strict";n.r(t);n(20),n(34),n(21),n(36),n(35),n(28),n(29),n(30),n(7),n(24);var r=n(3),o=n(297),l=n.n(o);function c(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))){var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var j,f={components:{Post:function(){return n.e(96).then(n.bind(null,827))},NewPost:function(){return n.e(95).then(n.bind(null,758))},Result:function(){return Promise.all([n.e(4),n.e(5),n.e(7)]).then(n.bind(null,828))},ByLine:function(){return n.e(8).then(n.bind(null,829))}},head:function(){return{title:"Your Feed - RaceBase"}},methods:{closeAddWindow:function(){this.addingPost=!1},formatDate:function(e){return l()(e).format("MMMM D YYYY")},loadFeed:(j=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.addingPost=!1,e.prev=1,e.next=4,this.$axios.$get("/post/feed");case 4:if(t=e.sent){e.next=7;break}throw"No posts in feed";case 7:n=c(t),e.prev=8,n.s();case 10:if((r=n.n()).done){e.next=22;break}if(o=r.value,this.following[o.athlete_id]){e.next=16;break}return e.next=15,this.$axios.$get("/user/athlete/"+o.athlete_id);case 15:this.following[o.athlete_id]=e.sent;case 16:if(!o.result_id){e.next=20;break}return e.next=19,this.$axios.$get("/result/"+o.result_id);case 19:o.result=e.sent;case 20:e.next=10;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),n.e(e.t0);case 27:return e.prev=27,n.f(),e.finish(27);case 30:this.posts=t,e.next=37;break;case 33:e.prev=33,e.t1=e.catch(1),this.posts={},console.log(e.t1);case 37:case"end":return e.stop()}}),e,this,[[1,33],[8,24,27,30]])}))),function(){return j.apply(this,arguments)}),createdPost:function(){this.alert="Successfully created post!",this.loadFeed()}},middleware:"auth",asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,d,j,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$axios,r=e.store,o=r.state.auth.user,l=[],d={},t.prev=4,t.next=7,n.$get("/post/feed");case 7:if(l=t.sent){t.next=10;break}throw"No posts in feed";case 10:j=c(l),t.prev=11,j.s();case 13:if((f=j.n()).done){t.next=25;break}if(h=f.value,d[h.athlete_id]){t.next=19;break}return t.next=18,n.$get("/user/athlete/"+h.athlete_id);case 18:d[h.athlete_id]=t.sent;case 19:if(!h.result_id){t.next=23;break}return t.next=22,n.$get("/result/"+h.result_id);case 22:h.result=t.sent;case 23:t.next=13;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(11),j.e(t.t0);case 30:return t.prev=30,j.f(),t.finish(30);case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(4),console.log(t.t1);case 38:return t.abrupt("return",{addingPost:!1,posts:l,user:o,following:d,alert:""});case 39:case"end":return t.stop()}}),t,null,[[4,35],[11,27,30,33]])})))()}},h=(n(561),n(16)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-95 mx-auto mt-4"},[n("div",{staticClass:"d-flex align-items-center mb-2"},[n("h4",{staticClass:"mb-0"},[e._v(" Your Feed ")]),e._v(" "),e.addingPost?e._e():n("div",{staticClass:"btn btn-default mb-0 ml-auto",on:{click:function(t){e.addingPost=!0}}},[e._v("\n      New Post "),n("fa",{attrs:{icon:"pencil-alt"}})],1)]),e._v(" "),e.alert?n("div",{staticClass:"alert alert-primary alert-dismissible align-items-center mt-3"},[e._v("\n    "+e._s(e.alert)+"\n\n    "),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[n("fa",{attrs:{icon:"times"}})],1)])]):e._e(),e._v(" "),e.addingPost?n("NewPost",{staticClass:"mb-3",attrs:{user:e.user},on:{close:e.closeAddWindow,callback:e.createdPost}}):e._e(),e._v(" "),e.posts?n("div",{staticClass:"feed"},e._l(e.posts,(function(t){return n("div",{key:t._id,staticClass:"mb-4"},[t.title||t.body?n("Post",{attrs:{post:t,poster:e.following[t.athlete_id],userId:e.user._id},on:{loadFeed:e.loadFeed,deletedPost:function(t){e.alert="Successfully deleted post!"}}}):t.athlete||t.time?n("div",[n("ByLine",{attrs:{author:t.athlete,date:e.formatDate(t.date),authorized:!1,athleteId:t.athlete_id,profilePicUrl:e.following[t.athlete_id].profilePicUrl}}),e._v(" "),n("Result",{attrs:{result:t}})],1):e._e()],1)})),0):n("div",[n("h3",{staticClass:"mt-5"},[e._v(" Follow some athletes to get content on your feed! ")])])],1)}),[],!1,null,"7d2722c6",null);t.default=component.exports}}]);